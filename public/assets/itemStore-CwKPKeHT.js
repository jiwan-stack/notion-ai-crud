import{h as x,f as w,F as E,z as S,j as n,a0 as $,B as A,U as B,r as I,D as C}from"./vendor-vue-6-0MiUoZ.js";import{V as L}from"./index-ggOyftwP.js";const U={email:"pi pi-envelope",phone_number:"pi pi-phone",url:"pi pi-link",date:"pi pi-calendar",number:"pi pi-hashtag",checkbox:"pi pi-check-square",select:"pi pi-list",multi_select:"pi pi-list",rich_text:"pi pi-file-text",title:"pi pi-user",status:"pi pi-info-circle",files:"pi pi-file"},q=(l,e,t)=>e==="number"&&t==="dollar"?"pi pi-dollar":U[e]||"pi pi-tag",z=l=>l.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim(),M=(l,e,t)=>({email:"placeholders.email",phone_number:"placeholders.phone_number",url:"placeholders.url",number:t==="dollar"?"placeholders.amount":"placeholders.number",date:"placeholders.date",title:"placeholders.title",rich_text:"placeholders.rich_text",files:"placeholders.files"})[e]||`placeholders.${e}`||`Enter ${z(l).toLowerCase()}`,ge=l=>l.type==="select"&&l.select?[{value:l.select.name,label:l.select.name,color:l.select.color}]:l.type==="multi_select"&&l.multi_select?l.multi_select.map(e=>({value:e.name,label:e.name,color:e.color})):[],V={title:"text",rich_text:"textarea",email:"email",phone_number:"tel",url:"url",number:"number",select:"select",multi_select:"multiselect",checkbox:"checkbox",date:"date",status:"select"},K={default:"bg-gray-400",gray:"bg-gray-500",brown:"bg-amber-500",orange:"bg-orange-500",yellow:"bg-yellow-500",green:"bg-green-500",blue:"bg-blue-500",purple:"bg-purple-500",pink:"bg-pink-500",red:"bg-red-500"},O={default:"bg-gray-50 text-gray-700 border-gray-200",gray:"bg-gray-100 text-gray-800 border-gray-300",brown:"bg-amber-50 text-amber-800 border-amber-200",orange:"bg-orange-50 text-orange-700 border-orange-200",yellow:"bg-yellow-50 text-yellow-800 border-yellow-200",green:"bg-green-50 text-green-700 border-green-200",blue:"bg-blue-50 text-blue-700 border-blue-200",purple:"bg-purple-50 text-purple-700 border-purple-200",pink:"bg-pink-50 text-pink-700 border-pink-200",red:"bg-red-50 text-red-700 border-red-200"},be=(l,e=null)=>{if(!l)return"pi pi-calculator text-orange-500";if(e&&e.type==="number"&&e.number&&e.number.format)switch(e.number.format){case"dollar":return"pi pi-dollar text-green-500";case"euro":return"pi pi-euro text-blue-500";case"pound":return"pi pi-pound text-purple-500";case"yen":return"pi pi-yen text-red-500";case"rupee":return"pi pi-rupee text-orange-500";case"yuan":return"pi pi-yuan text-green-600";case"percent":return"pi pi-percentage text-indigo-500"}const t=l.toLowerCase();return t.includes("salary")||t.includes("amount")||t.includes("cost")||t.includes("price")||t.includes("budget")||t.includes("rate")||t.includes("hourly")?"pi pi-dollar text-green-500":t.includes("time")||t.includes("duration")||t.includes("period")||t.includes("experience")||t.includes("year")?"pi pi-calendar text-indigo-500":t.includes("person")||t.includes("people")||t.includes("user")||t.includes("age")?"pi pi-user text-purple-500":t.includes("rate")||t.includes("grade")||t.includes("level")||t.includes("rating")||t.includes("score")?"pi pi-star text-yellow-500":t.includes("total")||t.includes("sum")||t.includes("quantity")||t.includes("count")||t.includes("number")?"pi pi-hashtag text-blue-500":"text-orange-500"},G=l=>V[l]||"text",k={dollar:{locale:"en-US",currency:"USD",minDigits:2,maxDigits:2},euro:{locale:"de-DE",currency:"EUR",minDigits:2,maxDigits:2},pound:{locale:"en-GB",currency:"GBP",minDigits:2,maxDigits:2},yen:{locale:"ja-JP",currency:"JPY",minDigits:0,maxDigits:0},rupee:{locale:"en-IN",currency:"INR",minDigits:2,maxDigits:2},yuan:{locale:"zh-CN",currency:"CNY",minDigits:2,maxDigits:2},percent:{locale:"en-US",style:"percent",minDigits:2,maxDigits:2,transform:l=>l/100}},fe=(l,e)=>{if(typeof l!="number"||!e)return l;if(e.type==="number"&&e.number&&e.number.format){const t=e.number.format;if(k[t]){const a=k[t];return t==="percent"?new Intl.NumberFormat(a.locale,{style:a.style,minimumFractionDigits:a.minDigits,maximumFractionDigits:a.maxDigits}).format(a.transform(l)):new Intl.NumberFormat(a.locale,{style:"currency",currency:a.currency,minimumFractionDigits:a.minDigits,maximumFractionDigits:a.maxDigits}).format(l)}}return l.toLocaleString()},he=l=>K[l]||"bg-blue-500",pe=l=>!l||!l.color?"bg-gray-50 text-black":{default:"bg-gray-50 text-black",gray:"bg-gray-100 text-black",brown:"bg-amber-50 text-amber-900",orange:"bg-orange-50 text-orange-900",yellow:"bg-yellow-50 text-yellow-900",green:"bg-green-50 text-green-900",blue:"bg-blue-50 text-blue-900",purple:"bg-purple-50 text-purple-900",pink:"bg-pink-50 text-pink-900",red:"bg-red-50 text-red-900"}[l.color]||"bg-gray-50 text-black",ve=(l,e,t=null)=>{if(!l)return"bg-blue-50 text-blue-700 border-blue-200";let a=e.options||[];const s=a.length>0&&a.every(i=>i.value&&i.label);if((!a.length||!s)&&t&&t.properties&&t.properties[e.name]){const i=t.properties[e.name];i.options&&i.options.length>0&&(a=i.options)}if(!a.length)return"bg-blue-50 text-blue-700 border-blue-200";if(l&&l.color)return O[l.color]||"bg-blue-50 text-blue-700 border-blue-200";const r=a.find(i=>{const d=typeof l=="string"?l:l?.value||l?.label||l?.name||"";return typeof d!="string"?!1:!!(i.value===d||i.label===d||i.value?.toLowerCase()===d?.toLowerCase()||i.label?.toLowerCase()===d?.toLowerCase()||e.name.toLowerCase().includes("skill")&&(i.value?.toLowerCase().includes(d?.toLowerCase())||i.label?.toLowerCase().includes(d?.toLowerCase())||d?.toLowerCase().includes(i.value?.toLowerCase())||d?.toLowerCase().includes(i.label?.toLowerCase())))});return r&&r.color&&O[r.color]||"bg-blue-50 text-blue-700 border-blue-200"},xe=(l,e)=>{if(!e.options||!e.options.length)return"bg-blue-50 text-blue-700 border-blue-200";const t=e.options.find(a=>a.value===l);return!t||!t.color?"bg-blue-50 text-blue-700 border-blue-200":O[t.color]||"bg-blue-50 text-blue-700 border-blue-200"},we=(l,e)=>{if(!e.options||!e.options.length)return l;const t=e.options.find(a=>a.value===l);return t?t.label:l},ye=l=>l.type==="select"&&l.select?[{value:l.select.name,label:l.select.name,name:l.select.name,color:l.select.color}]:l.type==="multi_select"&&l.multi_select?l.multi_select.map(e=>({value:e.name,label:e.name,name:e.name,color:e.color})):Array.isArray(l)&&l.length>0&&typeof l[0]=="string"?l.map(e=>({value:e,label:e,name:e})):Array.isArray(l)&&l.length>0&&typeof l[0]=="object"&&l[0].name?l.map(e=>({value:e.value||e.name,label:e.label||e.name,name:e.name,color:e.color})):[];class _{static flattenProperties(e){const t={};return Object.entries(e||{}).forEach(([a,s])=>{switch(s.type){case"title":t[a]=s.title?.map(r=>r.plain_text).join("")||"";break;case"rich_text":t[a]=s.rich_text?.map(r=>r.plain_text).join("")||"";break;case"email":t[a]=s.email||"";break;case"phone_number":t[a]=s.phone_number||"";break;case"url":t[a]=s.url||"";break;case"select":t[a]=s.select?.name||"";break;case"multi_select":t[a]=s.multi_select?.map(r=>r.name)||[];break;case"checkbox":t[a]=s.checkbox||!1;break;case"number":t[a]=s.number||0;break;case"date":t[a]=s.date?.start||"";break;case"status":t[a]=s.status?.name||"";break;case"files":t[a]=s.files?.map(r=>({name:r.name,url:r.url||r.external?.url,type:r.type,size:r.size}))||[];break;default:t[a]=""}}),t}static convertToNotionProperties(e,t=null){const a={};return Object.entries(e).forEach(([s,r])=>{if(!(!r||r===""))if(t&&t.properties&&t.properties[s])switch(t.properties[s].type){case"title":a[s]={title:[{text:{content:r}}]};break;case"rich_text":a[s]={rich_text:[{text:{content:String(r)}}]};break;case"email":a[s]={email:r};break;case"phone_number":a[s]={phone_number:r};break;case"url":a[s]={url:r};break;case"select":a[s]={select:{name:r}};break;case"multi_select":Array.isArray(r)?a[s]={multi_select:r.map(d=>({name:d}))}:a[s]={multi_select:[]};break;case"checkbox":a[s]={checkbox:!!r};break;case"number":a[s]={number:Number(r)||0};break;case"date":a[s]={date:{start:r}};break;case"status":a[s]={status:{name:r}};break;case"files":Array.isArray(r)?a[s]={files:r.map(d=>({name:d.name,external:{url:d.url}}))}:a[s]={files:[]};break;default:a[s]={rich_text:[{text:{content:String(r)}}]}}else if(s.toLowerCase().includes("email"))a[s]={email:r};else if(s.toLowerCase().includes("phone"))a[s]={phone_number:r};else if(s.toLowerCase().includes("url")||s.toLowerCase().includes("link")||typeof r=="string"&&(r.startsWith("http")||r.startsWith("www")))a[s]={url:r};else if(s.toLowerCase()==="name"||s.toLowerCase().includes("title"))a[s]={title:[{text:{content:r}}]};else if(typeof r=="boolean")a[s]={checkbox:r};else if(typeof r=="number")a[s]={number:r};else if(Array.isArray(r))a[s]={multi_select:r.map(i=>({name:i}))};else if(r&&typeof r=="string"&&r.includes(",")){const i=r.split(",").map(d=>d.trim()).filter(d=>d);a[s]={multi_select:i.map(d=>({name:d}))}}else a[s]={rich_text:[{text:{content:String(r)}}]}}),a}static extractDatabaseInfo(e){const t=e.properties||{},a=this.generateSchema(t,e.title?.[0]?.plain_text||"Database");return console.log("Generated schema:",a),console.log("Generated schema properties:",a.properties),{id:e.id,title:e.title?.[0]?.plain_text||"Untitled Database",description:e.description?.[0]?.plain_text||"",properties:t,schema:a,created_time:e.created_time,last_edited_time:e.last_edited_time}}static transformPage(e){return{id:e.id,created_time:e.created_time,last_edited_time:e.last_edited_time,...this.flattenProperties(e.properties)}}static transformResultsResponse(e){return!e.success||!e.results?e:{...e,results:e.results.map(t=>this.transformPage(t))}}static transformResultResponse(e){return!e.success||!e.result?e:{...e,result:this.transformPage(e.result)}}static generateSchema(e,t="Database"){console.log("generateSchema called with properties:",e),console.log("generateSchema properties keys:",Object.keys(e||{})),console.log("generateSchema properties entries:",Object.entries(e||{}));const a={};Object.entries(e||{}).forEach(([r,i])=>{if(r!=="id"&&r!=="created_time"&&r!=="last_edited_time"){const d=this.extractPropertyIcon(i),F=this.extractPropertyEmoji(i),p=this.getDefaultIcon(r,i.type);if(a[r]={type:i.type||"rich_text",required:!1,icon:d||p,emoji:F,number:i.type==="number"?i.number:void 0,format:i.type==="number"?i.number?.format:void 0},(i.type==="select"||i.type==="multi_select")&&(i.select?.options||i.multi_select?.options)){const h=i.select?.options||i.multi_select?.options,g=h[0],R=Object.keys(g||{});let b=null,f=null;if(g&&(g.name?(b="name",f="name"):g.value?(b="value",f="value"):g.id?(b="id",f="id"):g.text?(b="text",f="text"):g.content?(b="content",f="content"):g.title?(b="title",f="title"):g.label&&(b="label",f="label")),!b)for(const m of R){const D=g[m];if(typeof D=="string"&&D.trim()&&m!=="color"){b=m,f=m;break}}a[r].options=h.map((m,D)=>{const j=b?m[b]:null,P=f?m[f]:null;return{value:j||m.name||m.value||m.id||m.text||m.content||m.title||m.label||`Option ${D+1}`,label:P||m.name||m.value||m.id||m.text||m.content||m.title||m.label||`Option ${D+1}`,color:m.color}})}}});const s={id:"inferred",title:t,properties:a};return console.log("generateSchema result:",s),s}static validateFormData(e,t){return L.validateFormData(e,t)}static formatLabel(e){return L.formatLabel(e)}static mapNotionTypeToFormType(e){return G(e)}static generateFormFields(e){if(!e||!e.properties)return{};if(e.properties&&Object.values(e.properties).some(a=>a.type&&!a[a.type]))return e.properties;const t={};return Object.entries(e.properties).forEach(([a,s])=>{t[a]={type:s.type,required:!1,label:this.formatLabel(a),placeholder:this.generatePlaceholder(a,s.type),icon:this.getDefaultIcon(a,s.type,s.number?.format),options:s.type==="select"||s.type==="multi_select"?this.extractOptionsFromValues(s):[],format:s.type==="number"?s.number?.format:void 0,number:s.type==="number"?s.number:void 0,id:s.id,...s}}),t}static extractOptionsFromValues(e){return e.type==="select"&&e.select?[{value:e.select.name,label:e.select.name,color:e.select.color}]:e.type==="multi_select"&&e.multi_select?e.multi_select.map(t=>({value:t.name,label:t.name,color:t.color})):[]}static generatePlaceholder(e,t){return M(e,t)}static extractPropertyIcon(e){return e.icon?e.icon:e.metadata&&e.metadata.icon?e.metadata.icon:e.config&&e.config.icon?e.config.icon:e.format&&e.format.icon?e.format.icon:e.select&&e.select.icon?e.select.icon:e.multi_select&&e.multi_select.icon?e.multi_select.icon:e.parent&&e.parent.icon?e.parent.icon:e.base&&e.base.icon?e.base.icon:null}static extractPropertyEmoji(e){return e.emoji?e.emoji:e.metadata&&e.metadata.emoji?e.metadata.emoji:e.config&&e.config.emoji?e.config.emoji:e.format&&e.format.emoji?e.format.emoji:e.select&&e.select.emoji?e.select.emoji:e.multi_select&&e.multi_select.emoji?e.multi_select.emoji:e.parent&&e.parent.emoji?e.parent.emoji:e.base&&e.base.emoji?e.base.emoji:null}static getDefaultIcon(e,t,a){return q(e,t,a)}}const H="/.netlify/functions";class J{constructor(){this.cache=new Map,this.CACHE_DURATION=300*1e3}async apiRequest(e,t={}){const a=`${H}${e}`,s={headers:{"Content-Type":"application/json"}},r=await fetch(a,{...s,...t,headers:{...s.headers,...t.headers}});if(!r.ok){const i=await r.json().catch(()=>({error:"Network error"}));throw new Error(i.error||`HTTP ${r.status}`)}return r.json()}async getDatabaseInfo(e){const t=e?`&database_id=${encodeURIComponent(e)}`:"",a=await this.apiRequest(`/notion-crud?info=true${t}`);if(a.success&&a.database)return _.extractDatabaseInfo(a.database);throw new Error("Could not get database information")}async getAllItems(e={}){const{pageSize:t=50,startCursor:a,useCache:s=!0,databaseId:r}=e,i=`all_items_${r||"default"}_${t}_${a||"first"}`;if(s&&this.cache.has(i)){const h=this.cache.get(i);if(Date.now()-h.timestamp<this.CACHE_DURATION)return h.data}const d=new URLSearchParams;t&&d.append("page_size",t),a&&d.append("start_cursor",a),r&&d.append("database_id",r);const F=`/notion-crud?${d.toString()}`,p=await this.apiRequest(F);if(p.success&&p.results){const h=_.transformResultsResponse(p);return s&&this.cache.set(i,{data:h,timestamp:Date.now()}),h}return s&&this.cache.set(i,{data:p,timestamp:Date.now()}),p}async getItem(e,t){const a=`item_${t||"default"}_${e}`;if(this.cache.has(a)){const r=this.cache.get(a);if(Date.now()-r.timestamp<this.CACHE_DURATION)return r.data}const s=await this.apiRequest(`/notion-crud?id=${e}${t?`&database_id=${encodeURIComponent(t)}`:""}`);if(s.success&&s.result){const r=_.transformResultResponse(s);return this.cache.set(a,{data:r,timestamp:Date.now()}),r}return this.cache.set(a,{data:s,timestamp:Date.now()}),s}async createItem(e,t=null,a){const s=_.convertToNotionProperties(e,t),r=await this.apiRequest(`/notion-crud${a?`?database_id=${encodeURIComponent(a)}`:""}`,{method:"POST",body:JSON.stringify(s)});if(r.success&&r.result){const i=_.transformResultResponse(r);return this.clearCacheByPattern("all_items_"),i}return this.clearCacheByPattern("all_items_"),r}async updateItem(e,t,a=null,s){const r=_.convertToNotionProperties(t,a),i=await this.apiRequest(`/notion-crud?id=${e}${s?`&database_id=${encodeURIComponent(s)}`:""}`,{method:"PUT",body:JSON.stringify(r)});if(i.success&&i.result){const d=_.transformResultResponse(i);return this.clearCacheByPattern("all_items_"),this.cache.delete(`item_${e}`),d}return this.clearCacheByPattern("all_items_"),this.cache.delete(`item_${e}`),i}async deleteItem(e,t){try{const a=await this.apiRequest(`/notion-crud?id=${e}${t?`&database_id=${encodeURIComponent(t)}`:""}`,{method:"DELETE"});return this.clearCacheByPattern("all_items_"),this.cache.delete(`item_${e}`),a}catch(a){throw console.error("Error deleting item:",a),a}}generateFormFields(e){return _.generateFormFields(e)}formatLabel(e){return _.formatLabel(e)}clearCacheByPattern(e){for(const t of this.cache.keys())t.includes(e)&&this.cache.delete(t)}clearCache(){this.cache.clear()}validateFormData(e,t){return L.validateFormData(e,t)}}const y=new J,W={class:"relative z-10"},Y={class:"space-y-3 flex-1"},Z={key:1,class:"relative"},Q={class:"relative z-10 bg-white rounded-lg overflow-hidden"},X={class:"scrollbar-auto-hide"},ee={class:"w-full"},te={class:"bg-white divide-y divide-gray-200"},ae={key:2,class:"relative"},_e={__name:"LoadingSkeleton",props:{count:{type:Number,default:6},containerClass:{type:String,default:""},type:{type:String,default:"card",validator:l=>["card","table","form"].includes(l)}},setup(l){return(e,t)=>(w(),x("div",{class:A(l.containerClass)},[l.type==="card"?(w(!0),x(E,{key:0},S(l.count,a=>(w(),x("div",{key:`card-skeleton-${a}`,class:"bg-white hover:shadow-lg transition-shadow p-4 rounded-lg shadow-lg flex flex-col h-full relative"},[t[3]||(t[3]=n("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[n("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),n("div",W,[t[1]||(t[1]=$('<div class="flex justify-end items-start mb-3"><div class="flex gap-2"><div class="w-8 h-8 bg-gray-200 rounded animate-pulse"></div><div class="w-8 h-8 bg-gray-200 rounded animate-pulse"></div></div></div><div class="mb-4 flex md:flex-row flex-col gap-2"><div class="flex justify-center mb-4"><div class="w-16 h-16 bg-gray-200 rounded-full animate-pulse"></div></div><div class="space-y-2"><div class="h-8 bg-gray-200 rounded animate-pulse" style="width:80%;"></div><div class="flex gap-2"><div class="h-6 bg-green-200 rounded-full animate-pulse" style="width:60px;"></div><div class="h-6 bg-blue-200 rounded-full animate-pulse" style="width:80px;"></div></div></div></div><div class="mb-4"><div class="grid grid-cols-1 sm:grid-cols-2 gap-1"><div class="flex items-center justify-start bg-blue-50 rounded-lg p-1 gap-1"><div class="w-4 h-4 bg-blue-200 rounded animate-pulse"></div><div class="h-4 bg-gray-200 rounded animate-pulse" style="width:60%;"></div></div><div class="flex items-center justify-start bg-blue-50 rounded-lg p-1 gap-1"><div class="w-4 h-4 bg-green-200 rounded animate-pulse"></div><div class="h-4 bg-gray-200 rounded animate-pulse" style="width:70%;"></div></div></div></div><div class="mb-4"><div class="grid grid-cols-1 sm:grid-cols-2 gap-3"><div class="flex flex-col items-center justify-between bg-green-50 rounded-lg p-1 border border-green-200"><div class="h-3 bg-gray-200 rounded animate-pulse" style="width:50%;"></div><div class="h-4 bg-gray-200 rounded animate-pulse" style="width:30%;"></div></div><div class="flex flex-col items-center justify-between bg-green-50 rounded-lg p-1 border border-green-200"><div class="h-3 bg-gray-200 rounded animate-pulse" style="width:60%;"></div><div class="h-4 bg-gray-200 rounded animate-pulse" style="width:40%;"></div></div></div></div>',4)),n("div",Y,[(w(),x(E,null,S(3,s=>n("div",{key:`field-${s}`,class:"space-y-1 pt-2 border-b border-gray-100 last:border-b-0"},t[0]||(t[0]=[n("div",{class:"flex items-center space-x-2"},[n("div",{class:"w-4 h-4 bg-gray-200 rounded animate-pulse"}),n("div",{class:"h-4 bg-gray-200 rounded animate-pulse",style:{width:"40%"}})],-1),n("div",{class:"h-4 bg-gray-200 rounded animate-pulse",style:{width:"70%"}},null,-1)]))),64))]),t[2]||(t[2]=n("div",{class:"text-xs text-gray-500 mt-auto pt-2 border-t border-gray-100"},[n("div",{class:"h-3 bg-gray-200 rounded animate-pulse",style:{width:"40%"}})],-1))])]))),128)):l.type==="table"?(w(),x("div",Z,[t[7]||(t[7]=n("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[n("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),n("div",Q,[t[6]||(t[6]=n("div",{class:"bg-gray-50 px-6 py-4 border-b border-gray-200"},[n("div",{class:"h-6 bg-gray-200 rounded animate-pulse",style:{width:"120px"}})],-1)),n("div",X,[n("table",ee,[t[5]||(t[5]=n("thead",{class:"bg-gray-50 border-b border-gray-200"},[n("tr",null,[n("th",{class:"px-6 py-3 text-left"},[n("div",{class:"h-4 bg-gray-200 rounded animate-pulse",style:{width:"80px"}})]),n("th",{class:"px-6 py-3 text-left"},[n("div",{class:"h-4 bg-gray-200 rounded animate-pulse",style:{width:"100px"}})]),n("th",{class:"px-6 py-3 text-left"},[n("div",{class:"h-4 bg-gray-200 rounded animate-pulse",style:{width:"90px"}})]),n("th",{class:"px-6 py-3 text-left"},[n("div",{class:"h-4 bg-gray-200 rounded animate-pulse",style:{width:"120px"}})]),n("th",{class:"px-6 py-3 text-left"},[n("div",{class:"h-4 bg-gray-200 rounded animate-pulse",style:{width:"60px"}})])])],-1)),n("tbody",te,[(w(!0),x(E,null,S(l.count,a=>(w(),x("tr",{key:`table-row-${a}`,class:"hover:bg-gray-50"},t[4]||(t[4]=[n("td",{class:"px-6 py-4 whitespace-nowrap"},[n("div",{class:"flex items-center space-x-3"},[n("div",{class:"w-10 h-10 bg-gray-200 rounded-full animate-pulse"}),n("div",null,[n("div",{class:"h-4 bg-gray-200 rounded animate-pulse mb-2",style:{width:"120px"}}),n("div",{class:"flex gap-2"},[n("div",{class:"h-5 bg-green-200 rounded-full animate-pulse",style:{width:"50px"}}),n("div",{class:"h-5 bg-blue-200 rounded-full animate-pulse",style:{width:"60px"}})])])])],-1),n("td",{class:"px-6 py-4"},[n("div",{class:"h-4 bg-gray-200 rounded animate-pulse",style:{width:"140px"}})],-1),n("td",{class:"px-6 py-4"},[n("div",{class:"h-4 bg-gray-200 rounded animate-pulse",style:{width:"80px"}})],-1),n("td",{class:"px-6 py-4"},[n("div",{class:"flex gap-1"},[n("div",{class:"h-5 bg-purple-200 rounded-full animate-pulse",style:{width:"60px"}}),n("div",{class:"h-5 bg-purple-200 rounded-full animate-pulse",style:{width:"70px"}})])],-1),n("td",{class:"px-6 py-4 whitespace-nowrap text-right"},[n("div",{class:"flex gap-2 justify-end"},[n("div",{class:"w-8 h-8 bg-gray-200 rounded animate-pulse"}),n("div",{class:"w-8 h-8 bg-gray-200 rounded animate-pulse"})])],-1)])))),128))])])])])])):l.type==="form"?(w(),x("div",ae,t[8]||(t[8]=[$('<div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-white rounded-lg h-full w-full"></div></div><div class="relative z-10 bg-white rounded-lg p-6"><div class="space-y-6"><div><div class="h-4 bg-gray-200 rounded animate-pulse mb-2" style="width:60px;"></div><div class="h-10 bg-gray-200 rounded animate-pulse"></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><div class="h-4 bg-gray-200 rounded animate-pulse mb-2" style="width:80px;"></div><div class="h-10 bg-gray-200 rounded animate-pulse"></div></div><div><div class="h-4 bg-gray-200 rounded animate-pulse mb-2" style="width:100px;"></div><div class="h-10 bg-gray-200 rounded animate-pulse"></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><div class="h-4 bg-gray-200 rounded animate-pulse mb-2" style="width:70px;"></div><div class="h-10 bg-gray-200 rounded animate-pulse"></div></div><div><div class="h-4 bg-gray-200 rounded animate-pulse mb-2" style="width:90px;"></div><div class="h-10 bg-gray-200 rounded animate-pulse"></div></div></div><div><div class="h-4 bg-gray-200 rounded animate-pulse mb-2" style="width:110px;"></div><div class="h-10 bg-gray-200 rounded animate-pulse"></div></div><div><div class="h-4 bg-gray-200 rounded animate-pulse mb-2" style="width:130px;"></div><div class="h-10 bg-gray-200 rounded animate-pulse"></div></div><div><div class="h-4 bg-gray-200 rounded animate-pulse mb-2" style="width:140px;"></div><div class="h-24 bg-gray-200 rounded animate-pulse"></div></div><div class="flex gap-4 pt-6"><div class="h-10 bg-gray-200 rounded animate-pulse" style="width:80px;"></div><div class="h-10 bg-gray-200 rounded animate-pulse" style="width:100px;"></div></div></div></div>',2)]))):(w(!0),x(E,{key:3},S(l.count,a=>(w(),x("div",{key:`default-skeleton-${a}`,class:"bg-white hover:shadow-lg transition-shadow p-4 rounded-lg shadow-lg flex flex-col h-full relative"},t[9]||(t[9]=[$('<div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-white rounded-lg h-full w-full"></div></div><div class="relative z-10"><div class="h-6 bg-gray-200 rounded animate-pulse mb-4" style="width:60%;"></div><div class="h-4 bg-gray-200 rounded animate-pulse mb-2" style="width:80%;"></div><div class="h-4 bg-gray-200 rounded animate-pulse mb-2" style="width:70%;"></div><div class="h-4 bg-gray-200 rounded animate-pulse" style="width:90%;"></div></div>',2)])))),128))],2))}},De=B("item",()=>{const l=I([]),e=I(null),t=I(null),a=I(null),s=I(!1),r=I(!1),i=I(null),d=C(()=>u=>l.value.find(c=>c.id===u)),F=C(()=>l.value.length),p=C(()=>t.value!==null),h=C(()=>a.value!==null),g=C(()=>p.value&&h.value),R=C(()=>t.value?y.generateFormFields(t.value):{}),b=async(u={})=>{try{s.value=!0,i.value=null;const c=await y.getAllItems(u);if(c.success&&c.results)return l.value=c.results,c;throw new Error(c.message||"Failed to fetch items")}catch(c){throw i.value=c.message||"Failed to fetch items",console.error("Error fetching items:",c),c}finally{s.value=!1}},f=async u=>{try{s.value=!0,i.value=null;const c=await y.getDatabaseInfo(u);if(c)return a.value=c,t.value=c.schema,c;throw new Error("Failed to fetch database info")}catch(c){throw i.value=c.message||"Failed to fetch database info",console.error("Error fetching database info:",c),c}finally{s.value=!1}},m=async(u,c={})=>{try{s.value=!0,i.value=null;const[o,v]=await Promise.all([y.getDatabaseInfo(u),y.getAllItems({pageSize:50,databaseId:u,...c})]);return a.value=o,t.value=o?.schema,l.value=v.results||v.items||v||[],{databaseInfo:o,items:v,schema:o?.schema}}catch(o){throw i.value=o.message||"Failed to load database",console.error("Error loading database:",o),o}finally{s.value=!1}},D=async(u,c=void 0)=>{try{s.value=!0,i.value=null;const o=await y.getItem(u,c);if(o.success&&o.result)return e.value=o.result,o.result;throw new Error(o.message||"Failed to fetch item")}catch(o){throw i.value=o.message||"Failed to fetch item",console.error("Error fetching item:",o),o}finally{s.value=!1}},j=async(u=!1)=>{if(!u&&g.value)return t.value;try{s.value=!0,i.value=null;const c=await y.getDatabaseInfo();if(c.schema)return t.value=c.schema,a.value=c,c.schema;throw new Error("No database schema available")}catch(c){throw i.value=c.message||"Failed to fetch schema",console.error("Error fetching schema:",c),c}finally{s.value=!1}};return{items:l,currentItem:e,schema:t,databaseInfo:a,loading:s,submitting:r,error:i,getItemById:d,itemsCount:F,hasSchema:p,hasDatabaseInfo:h,isFullyLoaded:g,formFields:R,fetchAllItems:b,fetchDatabaseInfo:f,loadDatabase:m,fetchItem:D,fetchSchema:j,getDatabaseInfo:()=>a.value?{title:a.value.title,description:a.value.description,schema:a.value.schema}:null,ensureSchemaLoaded:async()=>{g.value||await j()},validateFormData:(u,c)=>L.validateFormData(u,c),createItem:async(u,c=null)=>{try{r.value=!0,i.value=null;const o=await y.createItem(u,t.value,c);if(o.success&&o.result)return l.value.unshift(o.result),o.result;throw new Error(o.message||"Failed to create item")}catch(o){throw i.value=o.message||"Failed to create item",console.error("Error creating item:",o),o}finally{r.value=!1}},updateItem:async(u,c)=>{try{r.value=!0,i.value=null;const o=await y.updateItem(u,c,t.value);if(o.success&&o.result){const v=o.result,N=l.value.findIndex(T=>T.id===u);return N!==-1&&(l.value[N]=v),e.value&&e.value.id===u&&(e.value=v),v}else throw new Error(o.message||"Failed to update item")}catch(o){throw i.value=o.message||"Failed to update item",console.error("Error updating item:",o),o}finally{r.value=!1}},deleteItem:async(u,c=null)=>{try{i.value=null;const o=await y.deleteItem(u,c);if(o.success)return l.value=l.value.filter(v=>v.id!==u),e.value&&e.value.id===u&&(e.value=null),o;throw new Error(o.message||"Failed to delete item")}catch(o){throw i.value=o.message||"Failed to delete item",console.error("Error deleting item:",o),o}},clearError:()=>{i.value=null},clearCurrentItem:()=>{e.value=null},reset:()=>{l.value=[],e.value=null,t.value=null,a.value=null,s.value=!1,r.value=!1,i.value=null}}});export{_ as N,_e as _,ve as a,ye as b,M as c,z as d,q as e,fe as f,be as g,ge as h,y as i,k as j,he as k,xe as l,we as m,pe as n,De as u};
