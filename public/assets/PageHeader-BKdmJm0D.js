import{c as M,f as re,g as ne,h as le,i as ce,j as me,k as ue,l as ie,m as de}from"./vendor-primevue-CFcGQxZZ.js";import{D as g,h as o,f as s,j as n,x as v,t as m,e as c,F as _,z as U,A as V,B as p,V as w,v as $,d as F,J as pe}from"./vendor-vue-6-0MiUoZ.js";import{u as T}from"./index-D43zvyop.js";import{c as ye,d as ve,e as be,h as ge,j as N,k as he,l as ke,m as xe,a as _e,n as $e}from"./itemStore-yywe5r66.js";const qe={key:0,class:"text-center py-8 text-gray-500"},Ue={key:1,class:"space-y-6"},Ve={key:0,class:"absolute top-4 right-4"},we={class:"space-y-2"},Fe=["for"],je={key:0,class:"text-red-600 text-xs"},Ee={key:1,class:"space-y-4"},Ce={class:"grid grid-cols-1 gap-4"},Be=["for"],Se={key:0,class:"mr-2 text-lg"},fe={key:2,class:"text-red-500 ml-1"},Ae={key:0,class:"text-red-600 block"},Le={key:2,class:"space-y-4"},Oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ie=["for"],ze={key:0,class:"mr-2 text-lg"},De={key:2,class:"text-red-500 ml-1"},Ne={key:0,class:"text-red-600 block"},Me={key:3,class:"space-y-4"},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Je=["for"],Ke={key:0,class:"mr-2 text-lg"},He={class:"text-green-600 ml-1"},Re={key:2,class:"text-red-500 ml-1"},Ge={class:"relative"},Qe={key:0,class:"text-red-600 block"},We={key:4,class:"space-y-4"},Xe={class:"space-y-4"},Ye=["for"],Ze={key:0,class:"mr-2 text-lg"},Pe={key:2,class:"text-red-500 ml-1"},et={class:"relative"},tt={key:0,class:"text-red-600 block"},at={key:5,class:"space-y-4"},st={class:"grid grid-cols-1 gap-4"},ot=["for"],rt={key:0,class:"mr-2 text-lg"},nt={key:2,class:"text-red-500 ml-1"},lt={class:"flex items-center gap-2"},ct={key:0,class:"mt-2"},mt={class:"flex items-center gap-2"},ut={key:2,class:"text-red-600 block"},it={key:6,class:"space-y-4"},dt={class:"grid grid-cols-1 gap-4"},pt=["for"],yt={key:0,class:"mr-2 text-lg"},vt={key:2,class:"text-red-500 ml-1"},bt={class:"flex flex-col items-center justify-center py-8 text-gray-500"},gt={class:"text-lg font-medium"},ht={key:0,class:"text-red-600 block"},kt={key:7,class:"space-y-4"},xt={class:"grid grid-cols-1 gap-4"},_t=["for"],$t={key:0,class:"mr-2 text-lg"},qt={key:2,class:"text-red-500 ml-1"},Ut={key:3,class:"text-red-600 block"},Vt={class:"flex justify-end gap-3 pt-6 border-t border-gray-200"},It={__name:"FormFields",props:{editingItem:{type:Object,default:null},submitting:{type:Boolean,default:!1},formErrors:{type:Object,default:()=>({})}},emits:["submitForm","refreshSchema","update:formData","cancelForm"],setup(l,{emit:j}){const{t:b}=T(),y=t=>q.editingItem?.[t]?.value||"",q=l,h=j,J=g(()=>q.editingItem?b("forms.update_item"):b("forms.add_item")),K=g(()=>q.editingItem?b("forms.updating"):b("forms.adding")),k=g(()=>q.editingItem?Object.entries(q.editingItem).map(([t,a])=>{let u=a.type;return a.multi_select&&Array.isArray(a.multi_select)&&(u="multi_select"),a.files&&Array.isArray(a.files)&&(u="files"),{name:t,type:u,required:a.required||!1,value:a.value||"",options:u==="select"||u==="multi_select"?ge(a):[],icon:be(t,u,a.number?.format),emoji:a.emoji||null,label:ve(t),placeholder:ye(t,u,a.number?.format),format:a.number?.format,min:u==="number"?0:void 0,step:u==="number"?a.number?.format&&a.number?.format!=="number"?500:1:void 0,id:a.id,number:a.number,select:a.select,multi_select:a.multi_select,...Object.fromEntries(Object.entries(a).filter(([i])=>!["number","select","multi_select"].includes(i)))}}):[]),E=g(()=>k.value.filter(t=>t.type==="title")),C=g(()=>k.value.filter(t=>{const a=t.name.toLowerCase();return a.includes("email")||a.includes("phone")||a.includes("contact")||t.type==="email"||t.type==="phone"})),B=g(()=>k.value.filter(t=>t.type==="number"&&t.format&&t.format!=="number")),S=g(()=>k.value.filter(t=>t.type==="number"&&(!t.format||t.format==="number"))),f=g(()=>k.value.filter(t=>t.type==="checkbox")),A=g(()=>k.value.filter(t=>t.type==="select"||t.type==="multi_select")),L=g(()=>k.value.filter(t=>t.type==="files")),O=g(()=>k.value.filter(t=>{const a=t.name.toLowerCase(),u=a.includes("email")||a.includes("phone")||a.includes("contact")||t.type==="email"||t.type==="phone";return t.type!=="title"&&t.type!=="number"&&t.type!=="checkbox"&&t.type!=="select"&&t.type!=="multi_select"&&t.type!=="files"&&!u})),x=(t,a)=>{h("update:formData",{[t]:a})},I=t=>{const a=y(t);if(Array.isArray(a))return a;if(typeof a=="string"&&a)try{const u=JSON.parse(a);return Array.isArray(u)?u:[]}catch{return a.split(",").map(i=>i.trim()).filter(i=>i)}return[]},z=(t,a)=>{h("update:formData",{[t]:a})},H=(t,a)=>{const i=I(t).filter(d=>typeof d=="string"&&typeof a=="string"?d!==a:typeof d=="object"&&typeof a=="object"?d.value!==a.value:d!==a);z(t,i)},R=t=>{const a=q.editingItem?.[t]?.value||[];return Array.isArray(a)?a:[]},G=(t,a)=>{const u=Array.from(a||[]).map(i=>({name:i.name,size:i.size,type:i.type,lastModified:i.lastModified,file:i,preview:URL.createObjectURL(i)}));h("update:formData",{[t]:u})},Q=(t,a)=>{const i=(t.files||[]).map(d=>({name:d.name,size:d.size,type:d.type,lastModified:d.lastModified,file:d,preview:URL.createObjectURL(d)}));h("update:formData",{[a]:i})},W=(t,a)=>{},X=async(t,a)=>{try{const u=t.xhr?.response;if(u){const i=JSON.parse(u);i.success&&i.files?h("update:formData",{[a]:i.files.map(d=>({name:d.name,url:d.url,type:d.type,size:d.size,blobKey:d.blobKey}))}):console.error("Upload failed:",i.error)}}catch(u){console.error("Upload processing failed:",u)}},Y=()=>{h("submitForm")},Z=()=>{h("cancelForm")},P=()=>{h("refreshSchema")};return(t,a)=>{const u=M,i=re,d=ne,D=le,ee=ce,te=me,ae=ue,se=ie,oe=de;return s(),o("form",{onSubmit:pe(Y,["prevent"]),class:"space-y-6 relative"},[k.value.length?(s(),o("div",Ue,[f.value.length>0?(s(),o("div",Ve,[n("div",we,[(s(!0),o(_,null,U(f.value,e=>(s(),o("div",{key:e.name,class:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg border border-gray-200"},[v(i,{id:e.name,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),binary:!0},null,8,["id","model-value","onUpdate:modelValue"]),n("label",{for:e.name,class:"text-sm text-gray-700 cursor-pointer"},m(e.description||e.label),9,Fe),l.formErrors[e.name]?(s(),o("small",je,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),E.value.length>0?(s(),o("div",Ee,[n("div",Ce,[(s(!0),o(_,null,U(E.value,e=>(s(),o("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(s(),o("span",Se,m(e.emoji),1)):e.icon?(s(),o("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),V(" "+m(e.label)+" ",1),e.required?(s(),o("span",fe,"*")):c("",!0)],8,Be),v(d,{id:e.name,type:e.type,placeholder:t.$t(e.placeholder),required:e.required,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"]),l.formErrors[e.name]?(s(),o("small",Ae,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),C.value.length>0?(s(),o("div",Le,[n("div",Oe,[(s(!0),o(_,null,U(C.value,e=>(s(),o("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(s(),o("span",ze,m(e.emoji),1)):e.icon?(s(),o("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),V(" "+m(e.label)+" ",1),e.required?(s(),o("span",De,"*")):c("",!0)],8,Ie),v(d,{id:e.name,type:e.type,placeholder:t.$t(e.placeholder),required:e.required,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"]),l.formErrors[e.name]?(s(),o("small",Ne,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),B.value.length>0?(s(),o("div",Me,[n("div",Te,[(s(!0),o(_,null,U(B.value,e=>(s(),o("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(s(),o("span",Ke,m(e.emoji),1)):e.icon?(s(),o("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),V(" "+m(e.label)+" ",1),n("span",He,"("+m(w(N)[e.format]?.currency||"USD")+")",1),e.required?(s(),o("span",Re,"*")):c("",!0)],8,Je),n("div",Ge,[v(D,{id:e.name,placeholder:t.$t(e.placeholder),required:e.required,min:e.min||0,max:e.max,step:e.step,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"]),showButtons:"",buttonLayout:"horizontal",mode:"currency",currency:w(N)[e.format]?.currency||"USD"},{incrementbuttonicon:$(()=>a[0]||(a[0]=[n("span",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:$(()=>a[1]||(a[1]=[n("span",{class:"pi pi-minus"},null,-1)])),_:2},1032,["id","placeholder","required","min","max","step","model-value","onUpdate:modelValue","class","currency"])]),l.formErrors[e.name]?(s(),o("small",Qe,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),S.value.length>0?(s(),o("div",We,[n("div",Xe,[(s(!0),o(_,null,U(S.value,e=>(s(),o("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(s(),o("span",Ze,m(e.emoji),1)):e.icon?(s(),o("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),V(" "+m(e.label)+" ",1),e.required?(s(),o("span",Pe,"*")):c("",!0)],8,Ye),n("div",et,[v(D,{id:e.name,placeholder:t.$t(e.placeholder),required:e.required,min:e.min||0,max:e.max,step:e.step,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"]),showButtons:"",buttonLayout:"horizontal"},{incrementbuttonicon:$(()=>a[2]||(a[2]=[n("i",{class:"pi pi-plus"},null,-1)])),decrementbuttonicon:$(()=>a[3]||(a[3]=[n("i",{class:"pi pi-minus"},null,-1)])),_:2},1032,["id","placeholder","required","min","max","step","model-value","onUpdate:modelValue","class"])]),l.formErrors[e.name]?(s(),o("small",tt,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),A.value.length>0?(s(),o("div",at,[n("div",st,[(s(!0),o(_,null,U(A.value,e=>(s(),o("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(s(),o("span",rt,m(e.emoji),1)):e.icon?(s(),o("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),V(" "+m(e.label)+" ",1),e.required?(s(),o("span",nt,"*")):c("",!0)],8,ot),e.type==="select"?(s(),o(_,{key:0},[v(ee,{id:e.name,required:e.required,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),options:e.options,optionLabel:"label",optionValue:"value",placeholder:t.$t("placeholders.select")+" "+e.label,class:p([{"p-invalid":l.formErrors[e.name]},"w-full"])},{option:$(r=>[n("div",lt,[r.option.color?(s(),o("span",{key:0,class:p([w(he)(r.option.color),"w-3 h-3 rounded-full"])},null,2)):c("",!0),n("span",null,m(r.option.label),1)])]),_:2},1032,["id","required","model-value","onUpdate:modelValue","options","placeholder","class"]),y(e.name)?(s(),o("div",ct,[n("div",mt,[n("span",{class:p([w(ke)(y(e.name),e),"px-3 py-1.5 text-sm rounded-full border font-medium"])},m(w(xe)(y(e.name),e)),3)])])):c("",!0)],64)):e.type==="multi_select"?(s(),F(te,{key:1,id:e.name,"model-value":I(e.name),"onUpdate:modelValue":r=>z(e.name,r),options:e.options,optionLabel:"label",optionValue:"value",placeholder:t.$t("placeholders.select")+" "+e.label,class:p([{"p-invalid":l.formErrors[e.name]},"w-full"]),filter:!0,allowEmpty:!0,display:"chip"},{option:$(r=>[n("div",{class:p(["flex items-center gap-2 px-2 py-1 rounded",w($e)(r.option)])},[n("span",null,m(r.option.label),1)],2)]),chip:$(r=>[n("div",{class:p(["flex items-center gap-2 px-3 py-1.5 text-sm rounded-full border font-medium",w(_e)(r.value,e)])},[n("span",null,m(typeof r.value=="string"?r.value:r.value?.label||r.value?.value||r.value),1),v(u,{type:"button",onClick:St=>H(e.name,r.value||r),class:"ml-1 hover:opacity-75 p-0 w-6 h-6 text-gray-700 hover:text-gray-900",icon:"pi pi-times",size:"small",link:"",rounded:""},null,8,["onClick"])],2)]),_:2},1032,["id","model-value","onUpdate:modelValue","options","placeholder","class"])):c("",!0),l.formErrors[e.name]?(s(),o("small",ut,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),L.value.length>0?(s(),o("div",it,[n("div",dt,[(s(!0),o(_,null,U(L.value,e=>(s(),o("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(s(),o("span",yt,m(e.emoji),1)):e.icon?(s(),o("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),V(" "+m(e.label)+" ",1),e.required?(s(),o("span",vt,"*")):c("",!0)],8,pt),v(ae,{id:e.name,"model-value":R(e.name),"onUpdate:modelValue":r=>G(e.name,r),onUpload:r=>X(r,e.name),onSelect:r=>Q(r,e.name),onProgress:r=>W(r,e.name),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"]),mode:"advanced",multiple:!0,auto:!0,maxFileSize:1e7,accept:"image/*",url:"/.netlify/functions/upload-file","choose-label":"Choose Files","show-upload-button":!1,"show-cancel-button":!1},{empty:$(()=>[n("div",bt,[a[4]||(a[4]=n("i",{class:"pi pi-cloud-upload text-4xl mb-4"},null,-1)),n("span",gt,m(t.$t("forms.drag_drop_files")),1),a[5]||(a[5]=n("span",{class:"text-sm mt-2"},"or click to browse",-1))])]),_:2},1032,["id","model-value","onUpdate:modelValue","onUpload","onSelect","onProgress","class"]),l.formErrors[e.name]?(s(),o("small",ht,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0),O.value.length>0?(s(),o("div",kt,[n("div",xt,[(s(!0),o(_,null,U(O.value,e=>(s(),o("div",{key:e.name,class:"space-y-2"},[n("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[e.emoji?(s(),o("span",$t,m(e.emoji),1)):e.icon?(s(),o("i",{key:1,class:p([e.icon,"mr-2 text-gray-500"])},null,2)):c("",!0),V(" "+m(e.label)+" ",1),e.required?(s(),o("span",qt,"*")):c("",!0)],8,_t),e.type==="date"?(s(),F(se,{key:0,id:e.name,placeholder:t.$t(e.placeholder),required:e.required,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"]),dateFormat:"yy-mm-dd"},null,8,["id","placeholder","required","model-value","onUpdate:modelValue","class"])):e.type==="rich_text"||e.type==="textarea"?(s(),F(oe,{key:1,id:e.name,placeholder:t.$t(e.placeholder),required:e.required,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"]),rows:"3"},null,8,["id","placeholder","required","model-value","onUpdate:modelValue","class"])):(s(),F(d,{key:2,id:e.name,type:e.type,placeholder:t.$t(e.placeholder),required:e.required,"model-value":y(e.name),"onUpdate:modelValue":r=>x(e.name,r),class:p([{"p-invalid":l.formErrors[e.name]},"w-full"])},null,8,["id","type","placeholder","required","model-value","onUpdate:modelValue","class"])),l.formErrors[e.name]?(s(),o("small",Ut,m(l.formErrors[e.name]),1)):c("",!0)]))),128))])])):c("",!0)])):(s(),o("div",qe,[n("p",null,m(t.$t("forms.no_form_fields_available")),1),v(u,{onClick:P,severity:"secondary",label:t.$t("forms.retry"),class:"mt-2"},null,8,["label"])])),n("div",Vt,[v(u,{type:"button",onClick:Z,label:t.$t("common.cancel"),severity:"secondary"},null,8,["label"]),v(u,{type:"submit",disabled:l.submitting,loading:l.submitting,label:l.submitting?K.value:J.value,severity:"primary"},null,8,["disabled","loading","label"])])],32)}}},wt={class:"mb-8"},Ft={key:0,class:"flex items-center gap-4 mb-4"},jt={class:"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg"},Et={class:"bg-white rounded-md px-3 py-2 flex items-center gap-2"},Ct={class:"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 bg-clip-text text-transparent font-medium"},Bt={class:"text-3xl font-bold text-gray-900 mb-2"},zt={__name:"PageHeader",props:{mode:{type:String,required:!0,validator:l=>["add","edit"].includes(l)},databaseTitle:{type:String,required:!0},showBackButton:{type:Boolean,default:!1}},emits:["goBack"],setup(l){const{t:j}=T();return(b,y)=>{const q=M;return s(),o("div",wt,[l.showBackButton?(s(),o("div",Ft,[v(q,{onClick:y[0]||(y[0]=h=>b.$emit("goBack")),severity:"secondary",text:"",class:"p-0"},{default:$(()=>[n("div",jt,[n("div",Et,[y[1]||(y[1]=n("i",{class:"pi pi-arrow-left bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 bg-clip-text text-transparent"},null,-1)),n("span",Ct,m(b.$t("common.back")),1)])])]),_:1})])):c("",!0),n("h1",Bt,m(l.mode==="add"?b.$t("items.create_item"):b.$t("items.edit_item"))+" "+m(l.databaseTitle),1),n("p",{class:p(["text-gray-600",{"mt-2":l.mode==="edit"}])},m(l.mode==="add"?b.$t("forms.add_description",{item:l.databaseTitle.toLowerCase()}):b.$t("forms.edit_description",{item:l.databaseTitle.toLowerCase()})),3)])}}};export{zt as _,It as a};
