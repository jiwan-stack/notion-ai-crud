import{c as X,d as pe,e as Ce}from"./vendor-primevue-CFcGQxZZ.js";import{u as fe,_ as je}from"./index-ggOyftwP.js";import{h as s,f as t,x as H,v as Z,t as p,D as q,d as R,V as G,j as e,W as le,F as B,z,B as E,e as j,G as Le,r as P,w as ge,a0 as Ie,a1 as ce,q as ue,a2 as me,A as oe,o as Se}from"./vendor-vue-6-0MiUoZ.js";import{g as se,N as re,f as he,a as de,b as Ae,_ as Oe,u as Be}from"./itemStore-CwKPKeHT.js";const ze={class:"text-center"},Ne={key:0},Me={key:1},De={__name:"LoadMoreButton",props:{loading:{type:Boolean,default:!1}},emits:["load-more"],setup(l){const{t:f}=fe();return(o,d)=>{const g=X;return t(),s("div",ze,[H(g,{onClick:d[0]||(d[0]=b=>o.$emit("load-more")),disabled:l.loading,severity:"secondary"},{default:Z(()=>[l.loading?(t(),s("span",Ne,"Loading...")):(t(),s("span",Me,p(o.$t("views.load_more")),1))]),_:1},8,["disabled"])])}}};function Ve(l="primary",f="small",o=!1){return{buttonPT:q(()=>({root:{class:[Re(f),Ue(l),"rounded-lg flex items-center justify-center","transition-all duration-300 hover:scale-105 hover:-translate-y-0.5","shadow-lg hover:shadow-xl","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:opacity-50 disabled:cursor-not-allowed","!border-0"]},icon:{class:o?"m-0":"mr-2"},label:{class:"font-medium"}}))}}function Re(l){const f={small:"px-3 py-1.5 text-sm",large:"px-6 py-3 text-lg",default:"px-4 py-2"};return f[l]||f.default}function Ue(l){const f={primary:"!bg-blue-600 !hover:bg-blue-700 !text-white focus:ring-blue-500 hover:shadow-[0_20px_40px_rgba(37,99,235,0.3),0_0_20px_rgba(37,99,235,0.2)]",secondary:"!bg-gray-200 !hover:bg-gray-300 !text-gray-700 hover:text-gray-800 border border-gray-300 focus:ring-gray-500 hover:shadow-[0_20px_40px_rgba(107,114,128,0.3),0_0_20px_rgba(107,114,128,0.2)]",danger:"!bg-red-600 !hover:bg-red-700 !text-white focus:ring-red-500 hover:shadow-[0_20px_40px_rgba(239,68,68,0.3),0_0_20px_rgba(239,68,68,0.2)]",success:"!bg-green-600 !hover:bg-green-700 !text-white focus:ring-green-500 hover:shadow-[0_20px_40px_#22c55e4d,0_0_20px_#22c55e33]",warning:"!bg-amber-600 !hover:bg-amber-700 !text-white focus:ring-amber-500 hover:shadow-[0_20px_40px_rgba(217,119,6,0.3),0_0_20px_rgba(217,119,6,0.2)]",info:"!bg-cyan-600 !hover:bg-cyan-700 !text-white focus:ring-cyan-500 hover:shadow-[0_20px_40px_rgba(6,182,212,0.3),0_0_20px_rgba(6,182,212,0.2)]"};return f[l]||f.primary}const ve={__name:"IconButton",props:{icon:{type:String,required:!0},severity:{type:String,default:"primary"},size:{type:String,default:"small"}},emits:["click"],setup(l,{emit:f}){const o=l,{buttonPT:d}=Ve(o.severity,o.size,!0),g=f,b=()=>{g("click")};return(w,F)=>{const L=X;return t(),R(L,{pt:G(d),icon:l.icon,onClick:b},null,8,["pt","icon"])}}},qe={class:"flex items-center gap-2"},Te={key:0,class:"flex items-center gap-1 bg-green-500 text-white px-2 py-1 rounded-full text-sm"},Ee={class:"font-medium"},Pe={key:1,class:"flex items-center gap-1 bg-gray-200 text-gray-600 px-2 py-1 rounded-full text-sm"},He={class:"font-medium"},xe={__name:"BooleanField",props:{value:{type:Boolean,required:!0},fieldName:{type:String,required:!0},formatLabel:{type:Function,required:!0}},setup(l){return(f,o)=>(t(),s("div",qe,[l.value?(t(),s("div",Te,[o[0]||(o[0]=e("i",{class:"pi pi-check-circle"},null,-1)),e("span",Ee,p(l.formatLabel(l.fieldName)),1)])):(t(),s("div",Pe,[o[1]||(o[1]=e("i",{class:"pi pi-times-circle"},null,-1)),e("span",He,p(l.formatLabel(l.fieldName)),1)]))]))}},We={class:"relative"},Ge={class:"relative z-10 bg-white rounded-lg overflow-hidden"},Je={class:"bg-gray-50 px-6 py-4 border-b border-gray-200"},Ke={class:"text-lg font-semibold text-gray-900"},Qe={class:"scrollbar-auto-hide"},Xe={class:"w-full"},Ye={class:"bg-gray-50 border-b border-gray-200"},Ze={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider md:sticky md:left-0 bg-gray-50 z-10"},et={class:"flex items-center space-x-2"},tt={class:"flex items-center space-x-2"},st={class:"flex items-center space-x-2"},rt={class:"flex items-center space-x-2"},lt={class:"flex items-center space-x-2"},it={class:"flex items-center space-x-2"},at={class:"bg-white divide-y divide-gray-200"},nt={class:"px-6 py-4 whitespace-nowrap left-0 bg-white z-10"},ot={class:"flex items-center space-x-3"},dt={key:0,class:"flex-shrink-0"},ct=["src","alt"],ut={class:"text-sm font-medium text-gray-900"},mt={key:0,class:"flex flex-wrap gap-2 mt-1"},pt={class:"text-xs text-gray-500 mt-1"},ft={class:"text-sm text-gray-600"},gt={class:"text-sm"},ht={key:0,class:"flex items-center space-x-2"},vt={class:"text-gray-900 font-mono"},xt={key:1,class:"text-gray-900 font-mono"},bt={class:"flex flex-wrap gap-1"},yt={key:0,class:"text-sm text-gray-400"},_t={class:"space-y-2"},wt={key:0,class:"space-y-1"},$t={key:0,class:"flex-shrink-0"},Ft=["src","alt"],kt={key:1,class:"pi pi-file text-blue-500 text-sm"},Ct={class:"flex-1 min-w-0"},jt={class:"text-xs text-gray-900 truncate"},Lt=["href"],It={key:0,class:"text-xs text-gray-500"},St={key:1,class:"text-sm text-gray-400"},At={key:0,class:"text-sm"},Ot={key:1,class:"text-sm text-gray-400"},Bt={key:1,class:"text-sm"},zt=["href"],Nt={key:1,class:"text-sm text-gray-400"},Mt={key:2,class:"text-sm text-gray-900"},Dt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium sticky right-0 bg-white z-10"},Vt={class:"flex gap-2 justify-end md:flex-row flex-col"},Rt={__name:"TableView",props:{items:{type:Array,default:()=>[]},schema:{type:Object,default:null},editRoute:{type:String,default:"/edit"}},emits:["deleteItem"],setup(l,{emit:f}){const o=le(),d=l,g=f,b=i=>{if(!d.schema?.properties||!i)return null;const c=Object.entries(d.schema.properties).find(([$,r])=>r.type==="title");return c?i[c[0]]:null},w=i=>{if(!d.schema?.properties||!i)return[];const c=[];return Object.entries(d.schema.properties).forEach(([$,r])=>{r.type==="checkbox"&&i[$]!==void 0&&c.push([$,i[$]||!1])}),c},F=i=>{const c=i.toLowerCase();return c.includes("email")?"pi pi-envelope":c.includes("phone")||c.includes("mobile")?"pi pi-phone":c.includes("linkedin")||c.includes("social")?"pi pi-linkedin":c.includes("website")||c.includes("url")?"pi pi-globe":c.includes("address")||c.includes("location")?"pi pi-map-marker":"pi pi-user"},L=(i,c)=>{const $=i.toLowerCase();return c.type==="url"?"pi pi-link":c.type==="date"?"pi pi-calendar":c.type==="select"?"pi pi-list":c.type==="rich_text"?"pi pi-file-edit":c.type==="files"?"pi pi-file":c.type==="avatar"||$.includes("avatar")||$.includes("profile")||$.includes("photo")?"pi pi-user":$.includes("bio")||$.includes("description")||$.includes("notes")?"pi pi-file-text":($.includes("status"),"pi pi-info-circle")},T=i=>{if(!d.schema?.properties?.[i])return!1;const c=d.schema.properties[i];return c.type==="number"&&c.number?.format&&c.number.format!=="number"},_=i=>{const c=b(i);if(c&&typeof c=="string"){const r=c.trim().split(/\s+/);if(r.length>=2)return`${r[0][0]}${r[r.length-1][0]}`.toUpperCase();if(r.length===1)return r[0][0].toUpperCase()}const $=Object.values(i).find(r=>r&&typeof r=="string"&&r.trim().length>0);return $?$.trim()[0].toUpperCase():"?"},U=i=>{const c=Object.entries(i).find(([r,u])=>u&&(r.toLowerCase().includes("avatar")||r.toLowerCase().includes("profile")||r.toLowerCase().includes("photo")||r.toLowerCase().includes("image")));if(c){const r=c[1];if(Array.isArray(r)&&r.length>0){const u=r[0];if(u&&u.url)return u.url}if(r&&typeof r=="object"&&!Array.isArray(r)){if(r.url)return r.url;if(r.files&&Array.isArray(r.files)&&r.files.length>0){const u=r.files[0];if(u&&u.url)return u.url}}if(typeof r=="string"&&r.trim())return r.trim()}const $=Object.entries(i).find(([r,u])=>{if(u&&typeof u=="object"){if(u.url&&typeof u.url=="string")return!0;if(u.files&&Array.isArray(u.files)&&u.files.length>0)return u.files.some(a=>a&&a.url)}return!1});if($){const r=$[1];if(r.url)return r.url;if(r.files&&Array.isArray(r.files)&&r.files.length>0){const u=r.files[0];if(u&&u.url)return u.url}}if(d.schema?.properties){const r=Object.entries(d.schema.properties).find(([u,a])=>a.type==="files");if(r){const u=i[r[0]];if(Array.isArray(u)&&u.length>0){const a=u[0];if(a&&a.url)return a.url}}}return null},D=i=>re.formatLabel(i),N=(i,c)=>{if(typeof i!="number")return i;const $=d.schema?.properties?.[c];return $?he(i,$):i.toLocaleString()},A=(i,c)=>typeof i=="object"&&i!==null?i.url?i.url:i.rich_text?i.rich_text.map($=>$.plain_text).join(""):i.select?i.select.name:i.multi_select?i.multi_select.map($=>$.name).join(", "):i.date?i.date.start:JSON.stringify(i):i||"N/A",x=i=>i?new Date(i).toLocaleDateString():"",M=(i,c)=>{const $={name:c,options:d.schema?.properties?.[c]?.options||[]};return de(i,$,d.schema)},I=(i,c)=>{const $={name:c,options:d.schema?.properties?.[c]?.options||[]};return de({value:i,label:i,name:i},$,d.schema)},k=(i,c)=>{if(!i)return"No selection";const r=(d.schema?.properties?.[c]?.options||[]).find(u=>u.value===i||u.name===i);return r&&(r.label||r.name)||i},O=i=>typeof i=="object"&&i!==null&&i.url||i,y=i=>{if(!i)return!1;if(i.type&&i.type.startsWith("image/"))return!0;const c=i.name||i.filename||"";return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff",".ico"].some(r=>c.toLowerCase().endsWith(r))},m=i=>i.url?i.url:i.preview?i.preview:i.file&&i.file instanceof File?URL.createObjectURL(i.file):"",S=()=>{if(!d.schema?.properties)return null;const i=Object.entries(d.schema.properties).find(([c,$])=>$.type==="title");return i?D(i[0]):null},J=()=>d.schema?.properties?Object.entries(d.schema.properties).filter(([i,c])=>i.toLowerCase().includes("email")||i.toLowerCase().includes("phone")||i.toLowerCase().includes("contact")||c.type==="email"||c.type==="phone"):[],K=()=>d.schema?.properties?Object.entries(d.schema.properties).filter(([i,c])=>c.type==="number"):[],Q=()=>d.schema?.properties?Object.entries(d.schema.properties).filter(([i,c])=>c.type==="multi_select"):[],Y=()=>d.schema?.properties?Object.entries(d.schema.properties).filter(([i,c])=>c.type==="files"):[],ee=()=>d.schema?.properties?Object.entries(d.schema.properties).filter(([i,c])=>!(c.type==="title"||c.type==="number"||c.type==="multi_select"||c.type==="files"||c.type==="checkbox"||i.toLowerCase().includes("email")||i.toLowerCase().includes("phone")||i.toLowerCase().includes("contact"))):[],ie=i=>{o.push(`${d.editRoute}/${i.id}`)},ae=i=>{g("deleteItem",i.id)};return(i,c)=>{const $=pe,r=xe,u=ve;return t(),s("div",We,[c[5]||(c[5]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Ge,[e("div",Je,[e("h3",Ke,p(i.$t("views.all_items")),1)]),e("div",Qe,[e("table",Xe,[e("thead",Ye,[e("tr",null,[e("th",Ze,[e("div",et,[c[0]||(c[0]=e("i",{class:"pi pi-user text-blue-500"},null,-1)),e("span",null,p(S()||"Item"),1)])]),(t(!0),s(B,null,z(J(),([a,n])=>(t(),s("th",{key:a,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",tt,[e("i",{class:E([F(a),"text-blue-500"])},null,2),e("span",null,p(D(a)),1)])]))),128)),(t(!0),s(B,null,z(K(),([a,n])=>(t(),s("th",{key:a,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",st,[e("i",{class:E([G(se)(a),"text-green-500"])},null,2),e("span",null,p(D(a)),1)])]))),128)),(t(!0),s(B,null,z(Q(),([a,n])=>(t(),s("th",{key:a,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-48"},[e("div",rt,[c[1]||(c[1]=e("i",{class:"pi pi-tags text-purple-500"},null,-1)),e("span",null,p(D(a)),1)])]))),128)),(t(!0),s(B,null,z(Y(),([a,n])=>(t(),s("th",{key:a,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-32"},[e("div",lt,[c[2]||(c[2]=e("i",{class:"pi pi-paperclip text-blue-500"},null,-1)),e("span",null,p(D(a)),1)])]))),128)),(t(!0),s(B,null,z(ee(),([a,n])=>(t(),s("th",{key:a,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},[e("div",it,[e("i",{class:E([L(a,n),"text-gray-500"])},null,2),e("span",null,p(D(a)),1)])]))),128)),c[3]||(c[3]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider sticky right-0 bg-gray-50 z-10"}," Actions ",-1))])]),e("tbody",at,[(t(!0),s(B,null,z(l.items,a=>(t(),s("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",nt,[e("div",ot,[U(a)?(t(),s("div",dt,[e("img",{src:U(a),alt:_(a),class:"w-10 h-10 rounded-full border-2 border-gray-200 shadow-sm bg-gray-100 object-cover"},null,8,ct)])):(t(),R($,{key:1,label:_(a),size:"medium",shape:"circle",class:"border-2 border-gray-200 shadow-sm bg-gray-100"},null,8,["label"])),e("div",null,[e("div",ut,p(b(a)||"Untitled"),1),w(a).length>0?(t(),s("div",mt,[(t(!0),s(B,null,z(w(a),([n,v])=>(t(),R(r,{key:n,value:v,"field-name":n,"format-label":D},null,8,["value","field-name"]))),128))])):j("",!0),e("div",pt,p(x(a.created_time)),1)])])]),(t(!0),s(B,null,z(J(),([n,v])=>(t(),s("td",{key:n,class:"px-6 py-4"},[e("div",ft,p(a[n]||"Not provided"),1)]))),128)),(t(!0),s(B,null,z(K(),([n,v])=>(t(),s("td",{key:n,class:"px-6 py-4"},[e("div",gt,[T(n)?(t(),s("span",ht,[e("i",{class:E([G(se)(n),"text-green-500"])},null,2),e("span",vt,p(N(a[n]||0,n)),1)])):(t(),s("span",xt,p(N(a[n]||0,n)),1))])]))),128)),(t(!0),s(B,null,z(Q(),([n,v])=>(t(),s("td",{key:n,class:"px-6 py-4 min-w-48"},[e("div",bt,[(t(!0),s(B,null,z(a[n]||[],C=>(t(),s("span",{key:C.name||C,class:E([M(C,n),"px-2 py-1 text-xs rounded-full border font-medium"])},p(C.name||C),3))),128)),!a[n]||a[n].length===0?(t(),s("span",yt," No tags ")):j("",!0)])]))),128)),(t(!0),s(B,null,z(Y(),([n,v])=>(t(),s("td",{key:n,class:"px-6 py-4 min-w-32"},[e("div",_t,[a[n]&&Array.isArray(a[n])&&a[n].length>0?(t(),s("div",wt,[(t(!0),s(B,null,z(a[n].slice(0,2),(C,te)=>(t(),s("div",{key:te,class:"flex items-center space-x-2"},[y(C)?(t(),s("div",$t,[e("img",{src:m(C),alt:C.name||"File preview",class:"w-8 h-8 object-cover rounded border border-gray-200"},null,8,Ft)])):(t(),s("i",kt)),e("div",Ct,[e("p",jt,p(C.name||"Unknown file"),1),C.url?(t(),s("a",{key:0,href:C.url,target:"_blank",rel:"noopener noreferrer",class:"text-xs text-blue-600 hover:text-blue-800 hover:underline"}," View ",8,Lt)):j("",!0)])]))),128)),a[n].length>2?(t(),s("div",It," +"+p(a[n].length-2)+" more files ",1)):j("",!0)])):(t(),s("div",St," No files "))])]))),128)),(t(!0),s(B,null,z(ee(),([n,v])=>(t(),s("td",{key:n,class:"px-6 py-4"},[v.type==="select"?(t(),s("div",At,[a[n]?(t(),s("span",{key:0,class:E([I(a[n],n),"px-2 py-1 text-xs rounded-full border font-medium"])},p(k(a[n],n)),3)):(t(),s("span",Ot,p(i.$t("views.no_selection")),1))])):v.type==="url"?(t(),s("div",Bt,[a[n]?(t(),s("a",{key:0,href:O(a[n]),target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 underline flex items-center space-x-1"},[c[4]||(c[4]=e("i",{class:"pi pi-external-link text-xs"},null,-1)),e("span",null,p(O(a[n])),1)],8,zt)):(t(),s("span",Nt,p(i.$t("views.no_url")),1))])):(t(),s("div",Mt,p(A(a[n])),1))]))),128)),e("td",Dt,[e("div",Vt,[H(u,{icon:"pi pi-pencil",severity:"success",size:"small",onClick:n=>ie(a)},null,8,["onClick"]),H(u,{icon:"pi pi-trash",severity:"danger",size:"small",onClick:n=>ae(a)},null,8,["onClick"])])])]))),128))])])])])])}}},Ut={class:"relative"},qt={class:"relative z-10 bg-white rounded-lg p-4 hover:shadow-lg transition-shadow flex flex-col h-full"},Tt={class:"text-center py-16 flex-1 flex flex-col items-center justify-center"},Et={class:"text-2xl font-semibold text-gray-900 mb-2"},Pt={class:"text-gray-600 mb-6 text-center max-w-md"},Ht={class:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 rounded-lg px-3 py-2 shadow-lg flex items-center gap-2"},Wt={class:"text-white font-medium"},Gt={__name:"EmptyState",emits:["add-item"],setup(l){const{t:f}=fe();return(o,d)=>{const g=X;return t(),s("div",Ut,[d[3]||(d[3]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",qt,[e("div",Tt,[d[2]||(d[2]=e("div",{class:"text-6xl mb-4"},"ðŸ“‹",-1)),e("h3",Et,p(o.$t("empty_state.no_rows_found")),1),e("p",Pt,p(o.$t("empty_state.database_empty_description")),1),H(g,{onClick:d[0]||(d[0]=b=>o.$emit("add-item")),severity:"secondary",text:"",class:"p-0"},{default:Z(()=>[e("div",Ht,[d[1]||(d[1]=e("i",{class:"pi pi-plus text-white"},null,-1)),e("span",Wt,p(o.$t("empty_state.add_first_item")),1)])]),_:1})])])])}}},Jt={class:"text-gray-800 leading-relaxed"},Kt={__name:"TextField",props:{value:{type:[String,Number],required:!0}},setup(l){return(f,o)=>(t(),s("div",Jt,p(l.value),1))}},Qt={class:"space-y-3"},Xt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Yt={class:"text-sm font-medium text-gray-700"},Zt={class:"flex items-center space-x-2"},es={class:"text-gray-800 font-mono font-medium"},ts={key:0,class:"text-lg text-gray-600 font-medium"},ss={__name:"NumbersField",props:{value:{type:Object,required:!0},schema:{type:Object,default:null},formatLabel:{type:Function,required:!0},formatNumber:{type:Function,required:!0},getSchemaProperty:{type:Function,required:!0},getFieldCurrencySymbol:{type:Function,required:!0}},setup(l){return(f,o)=>(t(),s("div",Qt,[e("div",Xt,[(t(!0),s(B,null,z(l.value,(d,g)=>(t(),s("div",{key:g,class:"flex items-center justify-start bg-gray-50 rounded-lg gap-2 p-2"},[e("i",{class:E([G(se)(g,l.getSchemaProperty(g)),"text-blue-500"])},null,2),e("span",Yt,p(l.formatLabel(g)),1),e("div",Zt,[e("span",es,p(l.formatNumber(d||0,g)),1),l.getFieldCurrencySymbol(g)?(t(),s("span",ts,p(l.getFieldCurrencySymbol(g)),1)):j("",!0)])]))),128))])]))}},rs={class:"grid grid-cols-2 gap-4"},ls={key:0,class:"flex items-center space-x-2"},is={class:"text-gray-800"},as={key:1,class:"flex items-center space-x-2"},ns={class:"text-gray-800"},os={__name:"ContactField",props:{value:{type:[Object,String],required:!0}},setup(l){return(f,o)=>(t(),s("div",rs,[typeof l.value=="string"||l.value?.email?(t(),s("div",ls,[o[0]||(o[0]=e("i",{class:"pi pi-envelope text-blue-500"},null,-1)),e("span",is,p(typeof l.value=="string"?l.value:l.value.email),1)])):j("",!0),typeof l.value=="string"||l.value?.phone?(t(),s("div",as,[o[1]||(o[1]=e("i",{class:"pi pi-phone text-green-500"},null,-1)),e("span",ns,p(typeof l.value=="string"?l.value:l.value.phone),1)])):j("",!0)]))}},ds={class:"space-y-3"},cs={key:0,class:"space-y-2"},us={class:"flex items-center space-x-3"},ms={key:0,class:"flex-shrink-0"},ps=["src","alt"],fs={key:1,class:"pi pi-file text-blue-500 text-lg"},gs={class:"flex-1 min-w-0"},hs={class:"text-sm font-medium text-gray-900 truncate"},vs={key:0,class:"text-xs text-gray-500"},xs={key:1,class:"text-xs text-blue-600 hover:text-blue-800"},bs=["href"],ys={key:1,class:"text-center py-4 text-gray-500"},_s={class:"text-sm"},ws={__name:"FileField",props:{value:{type:[Array,Object,String],required:!0},showRemoveButton:{type:Boolean,default:!1}},emits:["remove-file"],setup(l,{emit:f}){const o=l,d=f,g=q(()=>{if(!o.value)return[];if(Array.isArray(o.value))return o.value;if(typeof o.value=="object"&&o.value.files)return o.value.files;if(typeof o.value=="string")try{const _=JSON.parse(o.value);return Array.isArray(_)?_:[_]}catch{return[]}return[]}),b=_=>{if(!_)return"";const U=["Bytes","KB","MB","GB"],D=Math.floor(Math.log(_)/Math.log(1024));return Math.round(_/Math.pow(1024,D)*100)/100+" "+U[D]},w=_=>{d("remove-file",_)},F=_=>{if(!_)return!1;if(_.type)return _.type.startsWith("image/");const U=_.name||_.filename||"";return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg"].some(N=>U.toLowerCase().endsWith(N))},L=_=>_.url?_.url:_.preview?_.preview:_.file&&_.file instanceof File?URL.createObjectURL(_.file):"",T=_=>{console.warn("Failed to load image preview:",_.target.src)};return(_,U)=>{const D=X;return t(),s("div",ds,[g.value.length>0?(t(),s("div",cs,[(t(!0),s(B,null,z(g.value,(N,A)=>(t(),s("div",{key:A,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200"},[e("div",us,[F(N)?(t(),s("div",ms,[e("img",{src:L(N),alt:N.name||N.filename||"Image preview",class:"w-12 h-12 object-cover rounded-lg border border-gray-200",onError:T},null,40,ps)])):(t(),s("i",fs)),e("div",gs,[e("p",hs,p(N.name||N.filename||"Unknown file"),1),N.size?(t(),s("p",vs,p(b(N.size)),1)):j("",!0),N.url?(t(),s("p",xs,[e("a",{href:N.url,target:"_blank",rel:"noopener noreferrer",class:"hover:underline"}," View file ",8,bs)])):j("",!0)])]),l.showRemoveButton?(t(),R(D,{key:0,onClick:x=>w(A),icon:"pi pi-times",size:"small",severity:"danger",text:"",rounded:"",class:"ml-2"},null,8,["onClick"])):j("",!0)]))),128))])):(t(),s("div",ys,[U[0]||(U[0]=e("i",{class:"pi pi-file text-4xl text-gray-300 mb-2 block"},null,-1)),e("p",_s,p(_.$t("file_field.no_files_uploaded")),1)]))])}}},$s={class:"flex flex-wrap gap-2"},Fs={__name:"SelectField",props:{value:{type:[Object,Array],required:!0},fieldName:{type:String,required:!0},schema:{type:Object,default:null}},setup(l){const f=l,o=q(()=>({name:f.fieldName,options:g(f.fieldName,f.schema)})),d=q(()=>typeof f.value=="string"&&f.value.trim()?[{value:f.value,label:f.value,name:f.value}]:Array.isArray(f.value)&&f.value.length>0?f.value.map(b=>({value:b,label:b,name:b})):Ae(f.value)),g=(b,w)=>!w||!w.properties||!w.properties[b]?[]:w.properties[b].options||[];return(b,w)=>(t(),s("div",$s,[(t(!0),s(B,null,z(d.value,F=>(t(),s("span",{key:F.value||F,class:E([G(de)(F,o.value,l.schema),"px-3 py-1.5 text-sm rounded-full border font-medium"])},p(F.label||F),3))),128))]))}},ks={class:"flex items-center space-x-2"},Cs={class:"text-gray-800"},js={__name:"DateField",props:{value:{type:[Object,String],required:!0}},setup(l){const f=o=>o?new Date(o).toLocaleDateString():"";return(o,d)=>(t(),s("div",ks,[d[0]||(d[0]=e("i",{class:"pi pi-calendar text-indigo-500"},null,-1)),e("span",Cs,p(f(typeof l.value=="string"?l.value:l.value.date?.start||l.value.date)),1)]))}},Ls={class:"flex items-center space-x-2"},Is=["href"],Ss={__name:"UrlField",props:{value:{type:[Object,String],required:!0}},setup(l){const f=o=>{try{const d=new URL(o);return d.hostname+d.pathname}catch{return o}};return(o,d)=>(t(),s("div",Ls,[d[0]||(d[0]=e("i",{class:"pi pi-link text-purple-500"},null,-1)),e("a",{href:typeof l.value=="string"?l.value:l.value.url,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 underline truncate max-w-xs"},p(f(typeof l.value=="string"?l.value:l.value.url)),9,Is)]))}},As={class:"text-gray-800 leading-relaxed"},Os={__name:"RichTextField",props:{value:{type:[Object,String],required:!0}},setup(l){const f=l,o=q(()=>Array.isArray(f.value)?f.value:f.value&&typeof f.value=="object"?f.value.rich_text||f.value.title||[]:typeof f.value=="string"?[{text:{content:f.value},annotations:{}}]:[]),d=g=>{if(!g)return{};const b={};return g.italic&&(b.fontStyle="italic"),g.underline&&(b.textDecoration="underline"),g.strikethrough&&(b.textDecoration="line-through"),g.code&&(b.fontFamily="monospace",b.backgroundColor="#f3f4f6",b.padding="2px 4px",b.borderRadius="4px"),b};return(g,b)=>(t(),s("div",As,[(t(!0),s(B,null,z(o.value,(w,F)=>(t(),s("span",{key:F,class:E(w.annotations?.bold?"font-semibold":""),style:Le(d(w.annotations))},p(w.text?.content||w.plain_text||""),7))),128))]))}},Bs={key:0,class:"bg-white hover:shadow-lg text-gray-900 transition-shadow p-4 rounded-lg shadow-lg flex flex-col h-full relative"},zs={class:"relative z-10"},Ns={class:"flex justify-end items-start mb-3"},Ms={class:"flex gap-2"},Ds={key:0,class:"mb-4 flex md:flex-row flex-col gap-2"},Vs={class:"flex justify-center mb-4"},Rs={key:0,class:"relative"},Us=["src","alt"],qs={class:"text-2xl font-bold text-gray-900"},Ts={key:0,class:"mb-2"},Es={class:"flex flex-wrap gap-2"},Ps={key:1,class:"mb-4"},Hs={class:"grid grid-cols-1 sm:grid-cols-2 gap-1"},Ws={class:"flex items-center space-x-1"},Gs={class:"flex items-center space-x-1"},Js=["title"],Ks={key:2,class:"mb-4"},Qs={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Xs={class:"flex items-center space-x-1"},Ys=["title"],Zs={class:"flex items-center space-x-1"},er={class:"text-gray-800 font-mono font-medium"},tr={key:3,class:"mb-4"},sr={class:"gap-3"},rr={class:"flex items-center justify-between"},lr={class:"flex items-center space-x-2"},ir=["title"],ar={class:"text-gray-800 font-mono font-medium text-lg"},nr={key:4,class:"mb-4"},or={class:"gap-3"},dr={class:"flex items-center space-x-2"},cr=["title"],ur={class:"flex items-center space-x-2"},mr=["href","title"],pr={key:5,class:"mb-4"},fr={class:"space-y-3"},gr={class:"text-sm font-medium text-gray-700 mb-2"},hr={key:0,class:"mr-2 text-base"},vr={key:2,class:"pi pi-paperclip mr-2 text-gray-500"},xr=["title"],br={class:"space-y-2"},yr={key:0,class:"space-y-2"},_r={class:"flex items-center space-x-3"},wr={key:0,class:"flex-shrink-0"},$r=["src","alt"],Fr={key:1,class:"pi pi-file text-blue-500 text-lg"},kr={class:"flex-1 min-w-0"},Cr={class:"text-sm font-medium text-gray-900 truncate"},jr={key:0,class:"text-xs text-gray-500"},Lr={class:"flex items-center space-x-2"},Ir=["href"],Sr={key:1,class:"text-center py-4 text-gray-500"},Ar={class:"text-sm"},Or={class:"space-y-3 flex-1"},Br={key:0,class:"text-sm font-medium text-gray-700 mb-2"},zr={key:0,class:"mr-2 text-base"},Nr=["title"],Mr={class:"text-xs text-gray-500 mt-auto pt-2 border-t border-gray-100 flex flex-row justify-end"},Dr={key:0},Vr={__name:"CardView",props:{item:{type:Object,required:!0},schema:{type:Object,default:null},loading:{type:Boolean,default:!1},editRoute:{type:String,default:"/edit"},itemIdField:{type:String,default:"id"}},emits:["deleteItem"],setup(l,{emit:f}){const o=le(),d=Ce(),g=l,b=f,w=q(()=>{if(!g.schema?.properties||!g.item)return{titleFields:[],contactFields:[],booleanFields:[],currencyNumberFields:[],regularNumberFields:[],urlFields:[],fileFields:[],otherFields:[]};const r=g.schema.properties,u=g.item,a={titleFields:[],contactFields:[],booleanFields:[],currencyNumberFields:[],regularNumberFields:[],urlFields:[],fileFields:[],otherFields:[]};return Object.entries(r).forEach(([n,v])=>{const C=u[n];if(!(!C&&v.type!=="checkbox"&&v.type!=="select"&&v.type!=="multi_select"&&v.type!=="files"))switch(v.type){case"title":a.titleFields.push([n,C]);break;case"checkbox":a.booleanFields.push([n,C||!1]);break;case"number":v.number?.format&&v.number.format!=="number"?a.currencyNumberFields.push([n,C||0]):a.regularNumberFields.push([n,C||0]);break;case"url":a.urlFields.push([n,C]);break;case"files":a.fileFields.push([n,v]);break;case"select":case"multi_select":a.otherFields.push([n,v]);break;default:n.toLowerCase().includes("email")||n.toLowerCase().includes("phone")||n.toLowerCase().includes("contact")||v.type==="email"||v.type==="phone"?a.contactFields.push([n,C]):v.type!=="title"&&v.type!=="number"&&v.type!=="checkbox"&&v.type!=="url"&&v.type!=="files"&&a.otherFields.push([n,v])}}),a}),F=q(()=>w.value.titleFields),L=q(()=>w.value.contactFields),T=q(()=>w.value.booleanFields),_=q(()=>w.value.currencyNumberFields),U=q(()=>w.value.regularNumberFields),D=q(()=>w.value.urlFields),N=q(()=>w.value.fileFields),A=q(()=>w.value.otherFields),x=q(()=>{if(!g.schema?.properties)return{};const r={};return Object.entries(g.schema.properties).forEach(([u,a])=>{switch(a.type){case"rich_text":r[u]="rich_text";break;case"url":r[u]="url";break;case"date":r[u]="date";break;case"select":case"multi_select":r[u]="select";break;case"checkbox":r[u]="checkbox";break;case"files":r[u]="files";break;default:r[u]="text"}}),r}),M=r=>r==="contact"?"contact":r==="numbers"?"numbers":x.value[r]||"text",I=r=>r!=="contact"&&r!=="numbers",k=r=>re.formatLabel(r),O=(r,u=null)=>{if(typeof r!="number")return r;const a=u?J(u):null;return a?he(r,a):r.toLocaleString()},y=()=>{const r=g.item[g.itemIdField];o.push(`${g.editRoute}/${r}`)},m=()=>{const r=g.item[g.itemIdField],u=F.value.length>0?F.value[0][1]:"this item";d.require({message:`Are you sure you want to delete "${u}"?`,header:"Confirm Deletion",icon:"pi pi-exclamation-triangle",acceptClass:"p-button-danger",accept:()=>{b("deleteItem",r)},reject:()=>{}})},S=r=>r?new Date(r).toLocaleDateString():"",J=r=>g.schema?.properties?.[r]||null,K=(r,u)=>{const a=r.toLowerCase();return a.includes("email")||u?.type==="email"?"pi pi-envelope text-blue-500":a.includes("phone")||a.includes("mobile")||u?.type==="phone"?"pi pi-phone text-green-500":a.includes("linkedin")||a.includes("social")?"pi pi-linkedin text-blue-600":a.includes("website")||a.includes("url")?"pi pi-globe text-purple-500":a.includes("address")||a.includes("location")?"pi pi-map-marker text-red-500":"pi pi-user text-gray-500"},Q=P(""),Y=()=>{if(F.value.length>0){const u=F.value[0][1];if(u&&typeof u=="string"){const a=u.trim().split(/\s+/);if(a.length>=2)return`${a[0][0]}${a[a.length-1][0]}`.toUpperCase();if(a.length===1)return a[0][0].toUpperCase()}}const r=Object.values(g.item).find(u=>u&&typeof u=="string"&&u.trim().length>0);return r?r.trim()[0].toUpperCase():"?"},ee=r=>{const u=Object.entries(r).find(([n,v])=>v&&(n.toLowerCase().includes("avatar")||n.toLowerCase().includes("profile")||n.toLowerCase().includes("photo")||n.toLowerCase().includes("image")));if(u){const n=u[1];if(Array.isArray(n)&&n.length>0){const v=n[0];if(v&&v.url)return v.url}if(n&&typeof n=="object"&&!Array.isArray(n)){if(n.url)return n.url;if(n.files&&Array.isArray(n.files)&&n.files.length>0){const v=n.files[0];if(v&&v.url)return v.url}}if(typeof n=="string"&&n.trim())return n.trim()}const a=Object.entries(r).find(([n,v])=>{if(v&&typeof v=="object"){if(v.url&&typeof v.url=="string")return!0;if(v.files&&Array.isArray(v.files)&&v.files.length>0)return v.files.some(C=>C&&C.url)}return!1});if(a){const n=a[1];if(n.url)return n.url;if(n.files&&Array.isArray(n.files)&&n.files.length>0){const v=n.files[0];if(v&&v.url)return v.url}}if(g.schema?.properties){const n=Object.entries(g.schema.properties).find(([v,C])=>C.type==="files");if(n){const v=r[n[0]];if(Array.isArray(v)&&v.length>0){const C=v[0];if(C&&C.url)return C.url}}}return null};ge(()=>g.item,r=>{if(r){const u=ee(r);Q.value=u}},{immediate:!0,deep:!0});const ie=r=>{console.error("Avatar image failed to load:",r.target.src)},ae=r=>{},i=r=>{if(!r)return!1;if(r.type&&r.type.startsWith("image/"))return!0;const u=r.name||r.filename||"";return[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff",".ico"].some(n=>u.toLowerCase().endsWith(n))},c=r=>r.url?r.url:r.preview?r.preview:r.file&&r.file instanceof File?URL.createObjectURL(r.file):"",$=r=>{if(!r)return"";const u=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(r)/Math.log(1024));return Math.round(r/Math.pow(1024,a)*100)/100+" "+u[a]};return(r,u)=>{const a=ve,n=pe,v=xe,C=Os,te=Ss,be=js,ye=Fs,_e=ws,we=os,$e=ss,Fe=Kt;return l.item&&Object.keys(l.item).length>0?(t(),s("div",Bs,[u[2]||(u[2]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",zs,[e("div",Ns,[e("div",Ms,[H(a,{icon:"pi pi-pencil",severity:"success",onClick:y}),H(a,{icon:"pi pi-trash",severity:"danger",onClick:m})])]),F.value.length>0?(t(),s("div",Ds,[e("div",Vs,[Q.value?(t(),s("div",Rs,[e("img",{src:Q.value,alt:Y(),class:"w-24 h-24 rounded-full border-2 border-gray-200 shadow-md bg-gray-100 object-cover",onError:ie,onLoad:ae},null,40,Us)])):(t(),R(n,{key:1,label:Y(),size:"xlarge",shape:"circle",class:"border-2 border-gray-200 shadow-md bg-gray-100 p-2"},null,8,["label"]))]),(t(!0),s(B,null,z(F.value,([h,V])=>(t(),s("div",{key:h,class:"flex flex-col justify-start gap-2 mb-2 ml-4"},[e("h2",qs,p(V),1),T.value.length>0?(t(),s("div",Ts,[e("div",Es,[(t(!0),s(B,null,z(T.value,([W,ne])=>(t(),R(v,{key:W,value:ne,"field-name":W,"format-label":ke=>k(ke)},null,8,["value","field-name","format-label"]))),128))])])):j("",!0)]))),128))])):j("",!0),L.value.length>0?(t(),s("div",Ps,[e("div",Hs,[(t(!0),s(B,null,z(L.value,([h,V])=>(t(),s("div",{key:h,class:"flex items-center justify-start bg-blue-50 rounded-lg p-1 gap-1"},[e("div",Ws,[e("i",{class:E(K(h,J(h)))},null,2)]),e("div",Gs,[e("span",{class:"text-gray-800 font-medium text-sm truncate max-w-32",title:V||"Not provided"},p(V||"Not provided"),9,Js)])]))),128))])])):j("",!0),_.value.length>0?(t(),s("div",Ks,[e("div",Qs,[(t(!0),s(B,null,z(_.value,([h,V])=>(t(),s("div",{key:h,class:"flex flex-col items-center justify-between bg-green-50 rounded-lg p-1 border border-green-200"},[e("div",Xs,[e("span",{class:"text-sm font-medium text-gray-700 truncate max-w-24",title:k(h)},p(k(h)),9,Ys)]),e("div",Zs,[e("span",er,p(O(V||0,h)),1)])]))),128))])])):j("",!0),U.value.length>0?(t(),s("div",tr,[e("div",sr,[(t(!0),s(B,null,z(U.value,([h,V])=>(t(),s("div",{key:h,class:"flex-col items-center justify-between bg-gray-50 rounded-lg p-3"},[e("div",rr,[e("div",lr,[e("i",{class:E([G(se)(h,J(h)),"text-blue-500"])},null,2),e("span",{class:"text-sm font-medium text-gray-700",title:k(h)},p(k(h)),9,ir)]),e("span",ar,p(O(V||0,h)),1)])]))),128))])])):j("",!0),D.value.length>0?(t(),s("div",nr,[e("div",or,[(t(!0),s(B,null,z(D.value,([h,V])=>(t(),s("div",{key:h,class:"flex-col items-center justify-between bg-purple-50 rounded-lg p-3 border border-purple-200"},[e("div",dr,[u[0]||(u[0]=e("i",{class:"pi pi-link text-purple-600"},null,-1)),e("span",{class:"text-sm font-medium text-gray-700",title:k(h)},p(k(h)),9,cr)]),e("div",ur,[e("a",{href:V,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 underline",title:V},p(V||"No URL"),9,mr)])]))),128))])])):j("",!0),N.value.length>0?(t(),s("div",pr,[e("div",fr,[(t(!0),s(B,null,z(N.value,([h,V])=>(t(),s("div",{key:h,class:"space-y-1"},[e("div",gr,[V?.emoji?(t(),s("span",hr,p(V.emoji),1)):V?.icon?(t(),s("i",{key:1,class:E([V.icon,"mr-2 text-gray-500"])},null,2)):(t(),s("i",vr)),e("span",{class:"truncate max-w-32",title:k(h)},p(k(h)),9,xr)]),e("div",br,[l.item[h]&&Array.isArray(l.item[h])&&l.item[h].length>0?(t(),s("div",yr,[(t(!0),s(B,null,z(l.item[h],(W,ne)=>(t(),s("div",{key:ne,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200"},[e("div",_r,[i(W)?(t(),s("div",wr,[e("img",{src:c(W),alt:W.name||"File preview",class:"w-12 h-12 object-cover rounded-lg border border-gray-200"},null,8,$r)])):(t(),s("i",Fr)),e("div",kr,[e("p",Cr,p(W.name||"Unknown file"),1),W.size?(t(),s("p",jr,p($(W.size)),1)):j("",!0)])]),e("div",Lr,[W.url?(t(),s("a",{key:0,href:W.url,target:"_blank",rel:"noopener noreferrer",class:"text-sm text-blue-600 hover:text-blue-800 hover:underline"}," View ",8,Ir)):j("",!0)])]))),128))])):(t(),s("div",Sr,[u[1]||(u[1]=e("i",{class:"pi pi-file text-4xl text-gray-300 mb-2 block"},null,-1)),e("p",Ar,p(r.$t("file_field.no_files_uploaded")),1)]))])]))),128))])])):j("",!0),e("div",Or,[(t(!0),s(B,null,z(A.value,([h,V])=>(t(),s("div",{key:h,class:"space-y-1 pt-2 border-b border-gray-100 last:border-b-0"},[I(h)?(t(),s("div",Br,[V?.emoji?(t(),s("span",zr,p(V.emoji),1)):V?.icon?(t(),s("i",{key:1,class:E([V.icon,"mr-2 text-gray-500"])},null,2)):j("",!0),e("span",{class:"truncate max-w-32",title:k(h)},p(k(h)),9,Nr)])):j("",!0),M(h)==="rich_text"?(t(),R(C,{key:1,value:l.item[h],"field-name":h,schema:l.schema},null,8,["value","field-name","schema"])):M(h)==="url"?(t(),R(te,{key:2,value:l.item[h],"field-name":h,schema:l.schema},null,8,["value","field-name","schema"])):M(h)==="date"?(t(),R(be,{key:3,value:l.item[h],"field-name":h,schema:l.schema},null,8,["value","field-name","schema"])):M(h)==="select"?(t(),R(ye,{key:4,value:l.item[h],"field-name":h,schema:l.schema},null,8,["value","field-name","schema"])):M(h)==="checkbox"?(t(),R(v,{key:5,value:l.item[h],"field-name":h,schema:l.schema},null,8,["value","field-name","schema"])):M(h)==="files"?(t(),R(_e,{key:6,value:l.item[h],"field-name":h,schema:l.schema},null,8,["value","field-name","schema"])):M(h)==="contact"?(t(),R(we,{key:7,value:l.item[h],"field-name":h,schema:l.schema},null,8,["value","field-name","schema"])):M(h)==="numbers"?(t(),R($e,{key:8,value:l.item[h],"field-name":h,schema:l.schema},null,8,["value","field-name","schema"])):(t(),R(Fe,{key:9,value:l.item[h],"field-name":h,schema:l.schema},null,8,["value","field-name","schema"]))]))),128))]),e("div",Mr,[e("span",null,"Added: "+p(S(l.item.created_time)),1),l.item.last_edited_time!==l.item.created_time?(t(),s("span",Dr," â€¢ Updated: "+p(S(l.item.last_edited_time)),1)):j("",!0)])])])):j("",!0)}}},Rr={class:"flex gap-4 items-center mb-6"},Ur={__name:"SearchFilterSkeleton",setup(l){return(f,o)=>(t(),s("div",Rr,o[0]||(o[0]=[Ie('<div class="relative flex-1"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-white rounded-lg h-full w-full"></div></div><div class="relative z-10"><div class="relative"><div class="h-10 bg-gray-200 rounded-lg animate-pulse"></div><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div></div></div></div></div><div class="flex-shrink-0"><div class="relative"><div class="absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg" style="filter:drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1));"><div class="bg-gray-100 rounded-lg h-full w-full"></div></div><div class="relative z-10 flex bg-gray-100 rounded-lg p-1"><div class="px-3 py-2 rounded-md flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:50px;"></div></div><div class="px-3 py-2 rounded-md flex items-center gap-2"><div class="w-4 h-4 bg-gray-300 rounded animate-pulse"></div><div class="h-4 bg-gray-300 rounded animate-pulse" style="width:60px;"></div></div></div></div></div>',2)])))}},qr={class:"space-y-6"},Tr={key:0},Er={key:1,class:"space-y-6"},Pr={class:"flex flex-col gap-4 lg:hidden"},Hr={class:"relative w-full"},Wr={class:"relative z-10"},Gr={class:"relative"},Jr=["placeholder"],Kr={class:"flex gap-2 items-center"},Qr={class:"flex-shrink-0"},Xr={class:"relative"},Yr={class:"relative z-10 flex bg-white rounded-lg p-1"},Zr={class:"hidden sm:inline"},el={class:"hidden sm:inline"},tl={class:"hidden lg:flex gap-4 items-center"},sl={class:"relative flex-1"},rl={class:"relative z-10"},ll={class:"relative"},il=["placeholder"],al={class:"flex-shrink-0"},nl={class:"relative"},ol={class:"relative z-10 flex bg-white rounded-lg p-1"},dl={key:0},cl={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ul={key:1},ml={__name:"ListView",props:{loading:{type:Boolean,default:!1},loadingMore:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},schema:{type:Object,default:null},hasMore:{type:Boolean,default:!1}},emits:["deleteItem","loadMore"],setup(l,{emit:f}){const o=le(),d=ce(),g=P("card"),b=P(""),w=P(!1),F=P(!1),L=l,T=f;q(()=>(L.items.length===0||!L.schema)&&!L.loading),q(()=>{if(L.items.length===0)return{verified:"Verified",available:"Available"};const A=Object.entries(L.items[0]).filter(([,O])=>typeof O=="boolean");let x="Verified",M="Available";const I=A.find(([O])=>{const y=O.toLowerCase();return y.includes("verified")||y.includes("verify")});I&&(x=re.formatLabel(I[0]));const k=A.find(([O])=>{const y=O.toLowerCase();return y.includes("available")||y.includes("hire")||y.includes("hiring")});return k&&(M=re.formatLabel(k[0])),{verified:x,available:M}});const _=q(()=>{let A=L.items;if(L.items.length>0&&(w.value||F.value),(w.value||F.value)&&(A=A.filter(M=>{if(w.value&&F.value){const I=Object.entries(M).some(([O,y])=>{if(typeof y!="boolean")return!1;const m=O.toLowerCase();return(m.includes("verified")||m.includes("verify"))&&y===!0}),k=Object.entries(M).some(([O,y])=>{if(typeof y!="boolean")return!1;const m=O.toLowerCase();return(m.includes("available")||m.includes("hire")||m.includes("hiring"))&&y===!0});return I&&k}return w.value?Object.entries(M).some(([I,k])=>{if(typeof k!="boolean")return!1;const O=I.toLowerCase();return(O.includes("verified")||O.includes("verify"))&&k===!0}):F.value?Object.entries(M).some(([I,k])=>{if(typeof k!="boolean")return!1;const O=I.toLowerCase();return(O.includes("available")||O.includes("hire")||O.includes("hiring"))&&k===!0}):!0})),!b.value.trim())return A;const x=b.value.toLowerCase().trim();return A.filter(M=>Object.entries(M).some(([,I])=>I==null?!1:typeof I=="string"?I.toLowerCase().includes(x):Array.isArray(I)?I.some(k=>typeof k=="string"?k.toLowerCase().includes(x):k.name&&k.name.toLowerCase().includes(x)):typeof I=="object"&&I.name?I.name.toLowerCase().includes(x):typeof I=="number"?I.toString().includes(x):!1))}),U=()=>{b.value=""},D=()=>{d.params.databaseId?o.push({name:"db-add",params:{databaseId:d.params.databaseId}}):o.push("/add")},N=A=>{T("deleteItem",A)};return(A,x)=>{const M=Ur,I=Oe,k=Vr,O=Gt,y=Rt,m=De;return t(),s("div",qr,[l.loading?(t(),s("div",Tr,[H(M),H(I,{count:6,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"})])):l.schema?(t(),s("div",Er,[e("div",Pr,[e("div",Hr,[x[8]||(x[8]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Wr,[e("div",Gr,[ue(e("input",{"onUpdate:modelValue":x[0]||(x[0]=S=>b.value=S),type:"text",placeholder:A.$t("views.search_items"),class:"w-full pl-10 pr-4 py-2.5 bg-white border-0 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0"},null,8,Jr),[[me,b.value]]),x[7]||(x[7]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"pi pi-search text-gray-400"})],-1)),b.value?(t(),s("button",{key:0,onClick:U,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},x[6]||(x[6]=[e("i",{class:"pi pi-times"},null,-1)]))):j("",!0)])])]),e("div",Kr,[e("div",Qr,[e("div",Xr,[x[11]||(x[11]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",Yr,[e("button",{onClick:x[1]||(x[1]=S=>g.value="card"),class:E(["px-2 sm:px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",g.value==="card"?"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])},[x[9]||(x[9]=e("i",{class:"pi pi-th-large sm:mr-2"},null,-1)),e("span",Zr,p(A.$t("views.card")),1)],2),e("button",{onClick:x[2]||(x[2]=S=>g.value="table"),class:E(["px-2 sm:px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",g.value==="table"?"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])},[x[10]||(x[10]=e("i",{class:"pi pi-table sm:mr-2"},null,-1)),e("span",el,p(A.$t("views.table")),1)],2)])])])])]),e("div",tl,[e("div",sl,[x[14]||(x[14]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",rl,[e("div",ll,[ue(e("input",{"onUpdate:modelValue":x[3]||(x[3]=S=>b.value=S),type:"text",placeholder:A.$t("views.search_items"),class:"w-full pl-10 pr-4 py-2.5 bg-white border-0 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-0"},null,8,il),[[me,b.value]]),x[13]||(x[13]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("i",{class:"pi pi-search text-gray-400"})],-1)),b.value?(t(),s("button",{key:0,onClick:U,class:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"},x[12]||(x[12]=[e("i",{class:"pi pi-times"},null,-1)]))):j("",!0)])])]),e("div",al,[e("div",nl,[x[17]||(x[17]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg",style:{filter:"drop-shadow(0 10px 25px rgba(0, 144, 247, 0.3)) drop-shadow(0 4px 6px rgba(186, 98, 252, 0.2)) drop-shadow(0 1px 3px rgba(242, 65, 107, 0.2)) drop-shadow(0 0 0 rgba(245, 86, 0, 0.1))"}},[e("div",{class:"bg-white rounded-lg h-full w-full"})],-1)),e("div",ol,[e("button",{onClick:x[4]||(x[4]=S=>g.value="card"),class:E(["px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",g.value==="card"?"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])},[x[15]||(x[15]=e("i",{class:"pi pi-th-large mr-2"},null,-1)),oe(" "+p(A.$t("views.card")),1)],2),e("button",{onClick:x[5]||(x[5]=S=>g.value="table"),class:E(["px-3 py-2 rounded-md text-sm font-medium transition-all duration-200",g.value==="table"?"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 text-white shadow-sm":"text-gray-500 hover:text-gray-700"])},[x[16]||(x[16]=e("i",{class:"pi pi-table mr-2"},null,-1)),oe(" "+p(A.$t("views.table")),1)],2)])])])]),g.value==="card"?(t(),s("div",dl,[_.value.length>0?(t(),s("div",cl,[(t(!0),s(B,null,z(_.value,S=>(t(),R(k,{key:S.id,item:S,schema:l.schema,editRoute:G(d).params.databaseId?`/db/${G(d).params.databaseId}/edit`:"/edit",onDeleteItem:N},null,8,["item","schema","editRoute"]))),128)),l.loadingMore?(t(),R(I,{key:0,count:3,class:"contents"})):j("",!0)])):(t(),R(O,{key:1,onAddItem:D}))])):g.value==="table"?(t(),s("div",ul,[_.value.length>0?(t(),R(y,{key:0,items:_.value,schema:l.schema,editRoute:G(d).params.databaseId?`/db/${G(d).params.databaseId}/edit`:"/edit",onDeleteItem:N},null,8,["items","schema","editRoute"])):(t(),R(O,{key:1,onAddItem:D}))])):j("",!0)])):!l.schema&&!l.loading?(t(),R(O,{key:2,onAddItem:D})):j("",!0),l.hasMore&&!l.loading?(t(),R(m,{key:3,loading:l.loadingMore,onLoadMore:A.loadMore},null,8,["loading","onLoadMore"])):j("",!0)])}}},pl={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3"},fl={class:"flex-1"},gl={class:"text-red-700"},hl={__name:"ErrorDisplay",props:{error:{type:String,default:""}},emits:["retry"],setup(l){return(f,o)=>{const d=X;return l.error?(t(),s("div",pl,[o[2]||(o[2]=e("i",{class:"pi pi-exclamation-triangle text-red-500 text-xl"},null,-1)),e("div",fl,[o[1]||(o[1]=e("strong",{class:"text-red-800"},"Error:",-1)),e("span",gl,p(l.error),1),H(d,{onClick:f.retry,severity:"danger",text:""},{default:Z(()=>o[0]||(o[0]=[oe(" Try Again ",-1)])),_:1,__:[0]},8,["onClick"])])])):j("",!0)}}},vl={class:"text-center space-y-4"},xl={key:0,class:"space-y-2"},bl={key:1,class:"text-4xl font-bold text-gray-900"},yl={key:2,class:"space-y-2"},_l={key:3,class:"text-lg text-gray-600 max-w-2xl mx-auto"},wl={class:"flex justify-end gap-4 flex-wrap"},$l={class:"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg p-0.5 shadow-lg"},Fl={class:"bg-white rounded-md px-3 py-2 flex items-center gap-2"},kl={class:"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 bg-clip-text text-transparent font-medium"},Cl={class:"bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 rounded-lg px-3 py-2 shadow-lg flex items-center gap-2"},jl={class:"text-white font-medium"},Ll={__name:"HeaderView",props:{loading:{type:Boolean,default:!1},databaseTitle:{type:String,default:""},databaseDescription:{type:String,default:""}},emits:["refreshSchema"],setup(l,{emit:f}){const o=le(),d=ce(),g=f,b=()=>{g("refreshSchema")},w=()=>{d.params.databaseId?o.push({name:"db-add",params:{databaseId:d.params.databaseId}}):o.push("/add")};return(F,L)=>{const T=X;return t(),s("div",vl,[l.loading&&!l.databaseTitle?(t(),s("div",xl,L[0]||(L[0]=[e("div",{class:"h-12 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"300px"}},null,-1)]))):(t(),s("h1",bl,p(l.databaseTitle),1)),l.loading&&!l.databaseDescription?(t(),s("div",yl,L[1]||(L[1]=[e("div",{class:"h-6 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"500px"}},null,-1),e("div",{class:"h-6 bg-gray-200 rounded-lg animate-pulse mx-auto",style:{width:"400px"}},null,-1)]))):l.databaseDescription?(t(),s("p",_l,p(l.databaseDescription),1)):j("",!0),e("div",wl,[H(T,{onClick:b,disabled:l.loading,severity:"secondary",text:"",class:"p-0"},{default:Z(()=>[e("div",$l,[e("div",Fl,[L[2]||(L[2]=e("i",{class:"pi pi-refresh bg-gradient-to-r from-blue-500 via-purple-500 via-pink-500 to-orange-500 bg-clip-text text-transparent"},null,-1)),e("span",kl,p(F.$t("views.refresh")),1)])])]),_:1},8,["disabled"]),H(T,{onClick:w,severity:"secondary",text:"",class:"p-0"},{default:Z(()=>[e("div",Cl,[L[3]||(L[3]=e("i",{class:"pi pi-plus text-white"},null,-1)),e("span",jl,p(F.$t("common.add")),1)])]),_:1})])])}}},Il={class:"home-view mt-8"},Sl={class:"space-y-8 max-w-7xl mx-auto"},Al={__name:"HomeView",setup(l){const f=ce(),o=Be(),d=P(!0),g=P(""),b=P([]),w=P(null),F=P(""),L=P(""),T=P(!1),_=P(null),U=P(!1),D=q(()=>w.value?.properties?{...w.value,properties:Object.fromEntries(Object.entries(w.value.properties).map(([y,m])=>[y,{...m,type:m.type,required:m.required||!1,emoji:m.emoji||null,icon:m.icon||null,number:m.number||null,select:m.select||null,multi_select:m.multi_select||null}]))}:null),N=async y=>{try{const m=await o.loadDatabase(y);w.value=m.schema,F.value=m.databaseInfo?.title||"Database",L.value=m.databaseInfo?.description||"",b.value=m.items.results||m.items.items||m.items||[],T.value=!!(m.items&&(m.items.has_more||m.items.hasMore)),_.value=m.items&&(m.items.next_cursor||m.items.nextCursor)||null}catch(m){console.error("Failed to load database:",m),g.value=m.message||"Failed to load database"}finally{d.value=!1}},A=async()=>{const y=f.params.databaseId;if(y)await N(y);else try{const[m,S]=await Promise.allSettled([o.ensureSchemaLoaded(),o.fetchAllItems()]);m.status==="rejected"&&console.error("Schema loading failed:",m.reason),S.status==="rejected"&&console.error("Items loading failed:",S.reason),m.status==="fulfilled"&&S.status==="fulfilled"&&x()}catch(m){console.error("Failed to initialize:",m),m.value=m.message||"Failed to initialize"}finally{d.value=!1}},x=()=>{const y=o.getDatabaseInfo();y&&(w.value=y?.schema||o.schema,y.title&&(F.value=y.title),y.description&&(L.value=y.description))},M=async()=>{const y=f.params.databaseId;if(y)await N(y);else try{const[m,S]=await Promise.allSettled([o.fetchSchema(!0),o.fetchAllItems()]);m.status==="fulfilled"&&S.status==="fulfilled"?(x(),b.value=o.items):(console.error("Schema refresh failed:",m.status==="rejected"?m.reason:"Unknown error"),console.error("Items refresh failed:",S.status==="rejected"?S.reason:"Unknown error"))}catch(m){console.error("Failed to refresh schema:",m)}},I=async()=>{if(!(!T.value||U.value)){U.value=!0;try{const y=f.params.databaseId;if(y){const m=await o.fetchAllItems({pageSize:50,startCursor:_.value,databaseId:y,useCache:!1}),S=m.results||m.items||[];b.value=b.value.concat(S),T.value=!!(m&&(m.has_more||m.hasMore)),_.value=m&&(m.next_cursor||m.nextCursor)||null}else await o.fetchAllItems(),b.value=o.items}catch(y){console.error("Failed to load more:",y)}finally{U.value=!1}}},k=async()=>{await A()},O=async y=>{try{const m=f.params.databaseId;m?(await o.deleteItem(y,m),b.value=b.value.filter(S=>S.id!==y)):(await o.deleteItem(y),await o.fetchAllItems(),b.value=o.items)}catch(m){console.error("Failed to delete item:",m)}};return Se(()=>{A()}),ge(()=>f.params.databaseId,(y,m)=>{y&&y!==m&&(b.value=[],w.value=null,F.value="",L.value="",T.value=!1,_.value=null,A())}),(y,m)=>{const S=Ll,J=hl,K=ml;return t(),s("div",Il,[e("div",Sl,[H(S,{loading:d.value,"database-title":F.value,"database-description":L.value,onRefreshSchema:M},null,8,["loading","database-title","database-description"]),H(J,{error:g.value,onRetry:k},null,8,["error"]),H(K,{loading:d.value,"loading-more":U.value,items:b.value,schema:D.value,"has-more":T.value,onDeleteItem:O,onLoadMore:I},null,8,["loading","loading-more","items","schema","has-more"])])])}}},Ml=je(Al,[["__scopeId","data-v-2524ad0a"]]);export{Ml as default};
